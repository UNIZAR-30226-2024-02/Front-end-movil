import React, { useRef, useState } from 'react';
import { View, Image, StyleSheet, TouchableOpacity, Text as Text1, Alert } from 'react-native';
import axios from 'axios';
import { IP } from '../config';
import Svg, { Defs, G, Path, Circle, Use, Text as Text2 , TSpan } from "react-native-svg"
import Risk from '../assets/Risk_game_board.svg'
import { useEffect } from 'react';
import { ReactNativeZoomableView } from '@openspacelabs/react-native-zoomable-view';
import io from 'socket.io-client';
import AsyncStorage from '@react-native-async-storage/async-storage';

import Dialog from "react-native-dialog";

export default function RiskMap({ naviagtion, route }) {
  //const [socket, setSocket] = useState('')

  const [whoami, setWhoami] = useState(null);

  const { token, partida, socket } = route.params;
  
  const [thisPartida, setThisPartida] = useState(null);
  //const [partida, setPartida] = useState(null);
  const [mapa, setMapa] = useState(null);

  //Pruebas para cambiar el color
  const [colorTest, setColorTest] = useState(["#ff0", "#cc6"]);

  const [state, setState] = useState({
    message: '',
  });

  const [numterritoriosTropas, setnumterritoriosTropas] = useState(0);
  const [visible, setVisible] = useState(false);
  const [dialogState, setDialogState] = useState({visible: false, title: '', type: ''});

  const [isOk, setOkState] = useState("No");

  // 
  const [newClicked, setNewClicked] = useState(false);
  const [territorioName, setTerritorioName] = useState('');

  

  useEffect(() => {
    //setSocket(io(IP))
   
    //COMENTADO PARA PRUEBAS SIN VENIR DEL LOBBY
    console.log(partida)
    //setIdPartida(partida._id);
    setThisPartida(partida);
    onLoad();
    //return () => socket.disconnect();
  }, []);

  useEffect(() => {
    if (socket) {
        socket.on('cambioEstado', async () => {
          console.log('Partida1', partida)
          const response = await axios.put(`${IP}/partida/getPartida/`, { idPartida: partida._id }, { headers: { 'Authorization': token } })
          if (response.status === 200) {
            //console.log('Partida1', response.data.partida)
            inicializarPartida(response.data.partida)
            
          } else {
          Alert.alert('Error', 'Error cargando partida');
          }
            //await new Promise(resolve => setTimeout(resolve, 1000)) // espero un rato

          //limpiarTropas() // TODO

          //Pinto el mapa
          //distribuirPiezas() // TODO
      });
    } 
  }, [socket])

  /*
  *
  *  Esto el svg, en react native no puedes meter directamente un svg, por lo que se tiene que hacer un componente que lo renderize
  *  Lo meto aqui para que el acceso a los datos sea mas facil.
  * 
  *  Los territorios no he logrado identificarlos de ninguna otra manera mas que por el nombre y a pelo como esta aqui
  *  Es un coñazo, pero es lo que hay
  * 
  */

  //Listener de los eventos del svg, De momento o hace nada
  //Esta funcion habra que quitarla
  const eventListener = (key,color, event) => {
    console.log(key);
    const nextCounters = colorTest.map((c, i) => {
      if (i === key) {
        // This one changed
        return color;

      } else {
        // The rest haven't changed
        return c;
      }
    });
    setColorTest(nextCounters);
  }

  //Esta fundion sirve para buscar el numero de tropas en un territorio y represetarlo en el svg
  const findTropas = (key) => {
    if (thisPartida) {
      const territorios = thisPartida.mapa.flatMap(continent => continent.territorios);
      if (territorios) {
        const territorio = territorios.find(territorio => territorio.nombre === key)
        if (territorio) {
          return territorio.tropas
        }
      }
    }
  }

  const findColor = (key) => {
    if (thisPartida) {
      const user = thisPartida.jugadores.find(jugador => jugador.territorios.includes(key))

      if (user) {
        switch (user.color) {
          case "verde":
            return "#0f0"
          case "rojo":
            return "#f00"
          case "azul":
            return "#0ff" // Cian, con el azul se ve mal el número de tropas
          case "amarillo":
            return "#ff0"
          case "rosa":
            return "#f0f"
          case "morado":
            return "#808"
        }
      }
    }
    else
      return "#000";
  }

  const MapSVGComponent = (props) => (
    false ? <Risk/> :
      <Svg
    xmlns="http://www.w3.org/2000/svg"
    xmlnsXlink="http://www.w3.org/1999/xlink"
    viewBox="182 114 720 405"
    {...props}
  >
    <Defs>
      <G id="a" fill="#fff" strokeLinejoin="round">
        <Path
        id="b"
        //ALASKA
          fill={colorTest[0]} 
          d="M254 242c-1-1 0 0-1-2 0-2-1-2-2-3 0 0-1 0-1-2 1-1 1-1 1-2l-3-3v-2c0-1 0-2-1-2-2-1-3 1-4-1 0-2 0-1-2-1-1 0-2 0-2-1-1-1-1-2-2-2s-2 0-3-1c0-1-1-2-2-2s-1 0-2 1c-2 0 2 1-1 2s-4 1-5 0c0 0-3 1-2 0 0-2 0-2 1-3 1 0 2 0 2-1-1 0-1-1-3 0-3 0-4 0-5 1s-1 2-1 3c0 0 1 0-2 1-3 2-1 0-4 2-3 3-2 3-4 4-3 0-1 0-3 2-2 1-1 2-3 2s-1 3-3 1-3-1-1-2c1-1 1-1 2-1s1 0 2-1c1-2 1-2 2-3 2 0 2 2 3 0 0-3 0-3 1-4s3-2 1-3c-2 0-2 0-3 1-2 0-2 1-4 1-1-1-2-1-2-1v-3s1-1-1-1c-2-1-2 1-2-1 0-1 1-1 0-2s-1-1-2-1c-1 1-3 2-2 0s2-2 3-3c0-1 1-3 1-4 1-1-1-1 1-2 1-1 1-1 3-1s1 0 2 1c2 0 2 1 3 0l2-2 1-1c0-1 1-2-1-1-1 0-1 0-2 1-2 0-2 1-3 0-1-2-1-3-1-3v-1c0-2-1-5 2-6s5 0 6 0c0 1-1 1 0 2 2 0 2 0 3-1 0-1 1-1 0-2-1 0-1 0-2-1v-3l-2-2c0-1-2-3 0-4 3 0 5-1 5-1s2-3 4-2c2 0 4 0 6-2 2-1 4 0 4 0l3 1s2 3 4 2 2 2 5 2c3 1 5 1 8 2 0 0 1 0 1 1-1 1-2 31-2 31l8 1v2c1 1 1 2 2 4 2 2 1 8 1 8l2 3s1 1 2 1v4c0 2-2 1-2 1-1 1-2 3-2 4s-2 1-2 1Z"
          onPress={stateMachine.bind(this, 0, "ALASKA")}/>
        <Circle
          fill={findColor("ALASKA")}
          cx="223" cy="210" r="10"
        />
        <Text2
          x="223" y="210" text-anchor="middle" fill="black">{findTropas("ALASKA")}
        </Text2>
        <Path
        //ALBERTA
          fill="#cc6"
          d="M253 214v2c1 1 1 2 2 4 2 2 1 8 1 8l2 3s1 1 2 1v4c0 2-2 1-2 1-1 1-2 3-2 4s-2 1-2 1c1 1 2 1 2 3 1 3 1 2 1 3 1 1 2 1 2 3 1 2 1 1 2 3 1 3 0 4 0 6 1 3 2 2 3 3v1h48l4-48-63-2Z"
            onPress={stateMachine.bind(this, 1, "ALBERTA")}
        />
        <Circle
          fill={findColor("ALBERTA")}
          cx="280" cy="250" r="10"
        />
        <Text2
          x="280" y="250" text-anchor="middle" fill="black">{findTropas("ALBERTA")}
        </Text2>
        <Path
        //America Central
          fill="#ff3"
          d="M264 319s0 3 1 3h8l4 2s1 2 2 2h10c0 1 3 4 4 4s1 0 2 1c0 0 1 1 2 1h5v4c0 1-1 2-1 4-1 1-2 3-2 3 0 1 2 3 2 3-1 2-1 5 0 6v2l2 3s2 3 5 2c3 0 1 0 4-1 2-1 1 1 3-1 1-3 0-3 1-3 2-1 1-1 3-1 1 1 0 1 2 1s3-3 2 0v4c-1 1 0 0-1 2l-2 2c-1 0-1 0-1 1 0 2 0 2-1 3-1 0-2 0-2 1 0 2 0 2 1 3 1 0 2 0 2 1 1 2 1 3 1 3 0 1 0 3-1 3s-2 0-2 2c0 1 1 3 0 3 0 0-2-1-2 0v3l-1 1v2c0 1-1 2 0 2 2 0 2 1 3 0h2c0-1 1-2 2-2l2 1s1 1 1 2c-1 1 0 1 0 2 0 2 0 3-1 3v2c-1 0 0 0-1 1v1c-1 0 0 0-1-1 0 0 0-1-1-2s-1-1-2-1c-2-1-2-2-3-1-1 0 0 1-1 0-2-1-2-1-3-2v-1c-1-1-2 0-2-2 0-1 1-1 0-2 0-1-1-1-1-2v-4l-1-2v-2l-1-1-1-1c0-1-1-3-1-4-1-1-2-2-6-4-4-1-4-2-7-2-4-1-5-2-5-3 0-2 0-2-1-3-1 0-2 0-1-1 0-1 1-1 1-2 1-1 1-2 1-3 0 0 0-1-1-1-1-1-4-3-4-3s1-1-2 0c-4 0-4 2-5 1s1-5 0-6c-2-1-1 0-2-1-1-2 0-3-1-5 0-1 0 1-1-4-1-4 1-3-1-6-2-2-5-2-5-4v-6Z"
          onPress={stateMachine.bind(this, 2, "AMERICA CENTRAL")}
        />
        <Circle
          fill={findColor("AMERICA CENTRAL")}
          cx="286" cy="355" r="10"
        />
        <Text2
          x="286" y="355" text-anchor="middle" fill="black">{findTropas("AMERICA CENTRAL")}
        </Text2>
        <Path
        //ESTADOS UNIDOS DEL ESTE
          fill="#cc3"
          d="M326 264h6c1 0 0 5 0 5s4-2 6-1c3 1 5-3 6-1 0 3 1 4 2 5 0 1 1 2 2 5s1 5 0 7c0 1-2 3-1 4 2 0 3 2 4 3s5-3 5-4-1-2 0-2c1-1 3 0 3-1 1-1 2-2 3-2s4-1 4-1l2-1s10-1 11-2c2-1 2 0 2 0s-1-4 0-5c0 0 1 0 2-1 0-1 1-1 2 0 1 0 5 2 4 4 0 2-1 5 0 5 2 1 3 0 3 1s1 2 1 2c1 1 3 0 3 0 0-1-1 1-2 2 0 1-1 2-1 2-3 1-3 4-4 3 0-1-1-1-1-3 1-2 2-1 2-3-1-1 0-2-1-2s0 0-2 1c-1 0-1-1-3 1-1 2-1 1-2 2-1 0-1 1-1 2l-2 2v2c0 1 1 3 1 3l-1 2c-1 1-1-1-5 3-3 4-2 4-4 5s-2 1-2 2c0 0-2 1-1 2s0 1 1 2c1 0 2-1 2 1s-1 3-3 4c-2 2-5 6-7 6-3 1-4 2-4 3s0 3-1 3c-2 0-1 0-1 3s0 4 1 5 1 1 1 3v4s1 0-1 1-4 2-4 0c-1-2-3-1-3-3 0-1 1-5 1-5s-2 0-2-1c-1-1-1-4-2-4 0-1-1-1-2-1-1 1-3 2-4 1 0 0 1 1-2 0-4-1-6-2-7-2h-6s-6 1-7 1-6 2-7 3c-2 1-2 3-3 3l-2 1s-2 2-2 3-1 3-2 3c0 1-1 0 0 2 0 0-2-2-2-3 0 0 1-2 2-3 0-2 1-3 1-4v-4s-2-4-1-5c0-1-2-1-2-1v-3h3c1-1 2-1 2-1l1-6c0-1 1-4 1-5s4-2 4-2c1 0 2 1 2 0 1-2 0-5 1-6 0-1 0-1 1-1 0-1 11-1 11-1 1-1 0-37 1-37Z"
          onPress={stateMachine.bind(this, 3, "ESTADOS UNIDOS ESTE")}
        />
        <Circle
          fill={findColor("ESTADOS UNIDOS ESTE")}
          cx="335" cy="326" r="10"
        />
        <Text2
          x="335" y="326" text-anchor="middle" fill="black">{findTropas("ESTADOS UNIDOS ESTE")}
        </Text2>
        <Path
        //Groenlandia
          fill="#cc0"
          d="M434 219s0 4-1 6c0 2-1 1-1 3-1 2 0 3-1 5-1 1-1-1-1 2 0 4 0 5-1 5-1 1 0 2-1 2-2 0-2 1-3 0 0-2 1-2-1-2-1-1-2 1-3-1 0-1 1-2 0-2-2-1 1 3-3-2s-4-8-4-8-1-1-1-2 1-4 0-5c-1-2-2-5-1-6s3 0 3-2 0-2 1-3c0-1 0-1-1-2-1 0 0 1-2 0-1 0-1-1-2-1 0 0 1 1-1 0s-3-1-1-2c2 0 3-1 4 0 0 0 1 1 0-1 0-1-4-2-4-4v-2c0-1 0-2-1-3s-1-1-1-2c0-2 0-2-1-3s-1 0-2-1c-1-2-1-2-2-2s-1 0-2-1-1-2-2-2c-2 1-3 1-3 2-1 0 0 1-2 1h-4s-1-2-3-1c-2 0-2 1-2 0-1-1-2-1-2-2 0 0-2 0 0-1 1-2 0-2 2-2h3c1-1 2-1 1-1 0 0 0-1-1-1-2 0-3 0-3-1s-1-2 0-2c2 0 3 1 4 0s1-1 2-1c1 1 3 1 3 0s2-1 1-1c-2-1-3-1-2-2 0 0 1 0 1-1-1-1-2-2 0-2 3 0 4 1 4 0 1-2-1-3 1-3 3 0 5-1 5-2s0-1 2-1c2 1 2 2 3 0 1-1 0-1 2-1 2 1 2 1 3 0 1 0-1-1 2 0 2 0 1 1 2-1 0-2-2-2 0-2 3-1 3 0 4-2 1-1 0-1 2-1 2-1 2 0 1-2-1-1-3-2 0-2 2 0 4 0 4-1 0 0 0 1 1 0 2 0 2 0 3-2 0-1 0-1 1 0 1 0 0 1 2 0s1-1 3-1h5c2 0 1 1 2 1h3c2 0 2 0 3 1 1 0 1 1 3 1s3-1 3 0c1 2 0 2 2 2 3 1 4 0 2 1-1 1-4 1-3 2s0 1-2 1c-2 1-6 1-3 2 3 0 5-1 6 0 0 1-1 1 2 1s2-1 4-1c3 1 3 2 3 0 1-2-1-3 2-2s2 1 4 0 2-3 3-1c0 2 0 3-1 4-2 0-2-1-2 1-1 2-1 2-2 3s-2 0-2 2c1 2 1 2 0 3 0 2-1 3 0 4s1 0 2 1c1 2 1 2 0 3 0 2-1 1-1 3 0 3 0 4 1 3 0 0 1-2 1 0 0 1 0 2-1 3-2 1-2 0-2 1s1 2 0 3 0 2-2 1c-1-2-2-3-3-2s-2 0-1 1c1 2 2 1 2 2 0 0 0 1 1 2 0 0 0 1 1 1 1-1 1 0 1 1v2l1 1c-1 1-1 1-2 1-1 1-1 2-1 2-1 0-2 0-2-1s0-3-1-3c-1-1-2-3-2-1v3c-1 0-2-1-1 1l2 1s2 1 1 2c0 0 0 1-2 1-1 0-1-2-2 0l-3 3-1-1s-1-2-1-1 0 1-1 3-1 3-2 3-2-1-2 0c-1 1 0 1-1 2s-2 1-3 1c0 0 1-2-1 0-1 2 0 2-2 3h-8c-1 1-1 2-1 2Z"
          onPress={stateMachine.bind(this, 4, "GROENLANDIA")}
        />
        <Circle
          fill={findColor("GROENLANDIA")}
          cx="430" cy="200" r="10"
        />
        <Text2
          x="430" y="200" text-anchor="middle" fill="black">{findTropas("GROENLANDIA")}
        </Text2>
        <Path
        //TERRITORIOS DEL NOROESTE
          fill="#996"
          d="M334 217c1-3 9-11 9-11s3 0 5-1c1-1-2-4-2-4l1-2 2 1s1 2 3 2 1-2 2-3c2 0 3-4 3-4s3 2 6-1 1-2 0-3c-1-2 1-3 1-3h-2s1-1 0-4c-2-2-2 2-4 3-1 1-1 2-5 1-3-1 0-2 0-4 0-1-4 1-5-1s-2 1-1-1c0-2-1-5-2-6s3-7 3-7 3 1 3-1c0-3 2-3 2-4s-4 0-4 0l-1 2s-4-3-4 0c0 4-1 4-3 8s-1 7-1 7 2 0 2 2c-1 3-5 2-5 2l-1-4h-2s-1 4 0 6c0 1-8 0-10-2s-5 2-7 3-4 0-6-1c-2 0-1 3-6 3-4-1-2-7-3-4-1 2-6-2-8-4s-7-2-7-2v-2h-6s-3 2-5 1c-2 0-1 2-1 2s-3 1-6 1c-3-1-3 1-4 2-2 1-7-2-10-3s-5 1-8 0c0 0-2 32-2 33 1 0 83 3 87 2 4 0 2 1 2 1Z"
          onPress={stateMachine.bind(this, 5, "TERRITORIOS DEL NOROESTE")}
        />
        <Circle
          fill={findColor("TERRITORIOS DEL NOROESTE")}
          cx="300" cy="205" r="10"
        />
        <Text2
          x="300" y="205" text-anchor="middle" fill="black">{findTropas("TERRITORIOS DEL NOROESTE")}
        </Text2>
        <Path
        //ONTARIO
          fill="#ff6"
          d="M333 219c-1 3-2 9-2 9l2 2s2 2 3 4c2 2 3 5 6 5 3-1 4 2 4 2l2-1s2-2 3-1c0 1 2 2 2 2s2-2 4-2 0 2 0 2l-4 2s1 2 2 2 2 4 1 5c-2 1 0 3 0 3l1 2 2 1v3c-1 2-1 19-1 19s1-2 2-2c0 0 2 1 2 2 1 0 1-2 1-2 1-1 1 0 2 0 1 1 0 0 1 0 2 0 2 3 2 4l-2 1s-3 1-4 1-2 1-3 2c0 1-2 0-3 1-1 0 0 1 0 2s-4 5-5 4-2-3-4-3c-1-1 1-3 1-4 1-2 1-4 0-7s-2-4-2-5c-1-1-2-2-2-5-1-2-3 2-6 1-2-1-6 1-6 1s1-5 0-5h-20v-3c0-2 4-45 4-45h18l-1 3Z"
          onPress={stateMachine.bind(this, 6, "ONTARIO")}
        />
        <Circle
          fill={findColor("ONTARIO")}
          cx="320" cy="245" r="10"
        />
        <Text2
            x="320" y="245" text-anchor="middle" fill="black">{findTropas("ONTARIO")}
          </Text2>
        <Path
        //QUEBEC
          fill="#990"
          d="M359 259s1-4 2-5 2-6 2-7c-1-1-2-1-1-3 1-1 0-4 2-3 2 0 4 0 4-1v-2c0-2 1-2 2-2 0 0 1 0 0-2v-3c-1-2-1-1-1-3-1-1-1-4 0-4 2 0 0-2 1-3 2 0 4 0 3-2 0-2-3-6-1-6s4 1 4 1h7s-1 2 1 3c2 0 2 1 3 1 0 1 1 2 1 2v2c0 1 1 2 0 2 0 1-1 1-1 2s1 3 1 3 1 1 2 1c1-1 1-2 2-2 2-1 2 1 3-1s1-2 1-3c0 0 2-2 3-1 1 0-1 5 0 6 1 2 3 0 3 0v3c1 0 0 1 0 2 1 1 1 1 1 2s1 1 1 1 1-1 2 0c0 2 0 3 1 3s2 2 2 2l1 2 3-2 2 1s-4 2-3 4c1 1 5-3 5 0 0 2-1 5-2 5s-2 1-2 1c0 1-2 2-3 2-1 1 0 2-2 2h-4s0 1-1 2v2c-1 0 2 0-2 1s-5 1-5 1h-3s0-1-2-1-3 2-3 2h-2l-2 2s-1 0-1 2c0 1 2 3 3 2 0-1 2-5 4-5s4 1 4 4c-1 3-1 2-1 3 1 2 2 3 1 4 0 1-1 1 1 2 1 1 2 3 3 1 0-2 1-3 2-2 0 0 2-1 1 2-1 2-1 2-2 3s-1-1-3 2c0 0-2 1-3 0 0 0-1-1-1-2s-1 0-3-1c-1 0 0-3 0-5 1-2-3-4-4-4-1-1-2-1-2 0-1 1-2 1-2 1-1 1 0 5 0 5s0-1-2 0c-1 1-11 2-11 2 0-1 0-4-2-4-1 0 0 1-1 0-1 0-1-1-2 0 0 0 0 2-1 2 0-1-2-2-2-2-1 0-2 2-2 2s0-17 1-19Z"
            onPress={stateMachine.bind(this, 7, "QUEBEC")}
        />
        <Circle
          fill={findColor("QUEBEC")}
          cx="370" cy="250" r="10"
        />
        <Text2
          x="370" y="250" text-anchor="middle" fill="black">{findTropas("QUEBEC")}
        </Text2>
        <Path
        //ESTADOS UNIDOS DEL OESTE
          fill="#993"
          d="M326 264c-1 0 0 36-1 37 0 0-11 0-11 1-1 0-1 0-1 1-1 1 0 4-1 6 0 1-1 0-2 0 0 0-4 1-4 2s-1 4-1 5l-1 6s-1 0-2 1h-3v3s2 0 2 1c-1 1 1 5 1 5h-5c-1 0-2-1-2-1-1-1-1-1-2-1s-4-3-4-4h-10c-1 0-2-2-2-2l-4-2h-8c-1 0-1-3-1-3-1-2-1-2-1-4s-3-5-4-7c-2-2-2-8-2-9 1-1 0-6 1-9 1-2 1-5 2-8 0-2-1-2 1-5 1-4 1-2 2-5 0-3 1-1 1-4 0-2 1-4 0-5 0 0-1 1 0 1s58 1 62 0Z"
            onPress={stateMachine.bind(this, 8, "ESTADOS UNIDOS OESTE")}
        />
        <Circle
          fill={findColor("ESTADOS UNIDOS OESTE")}
          cx="280" cy="300" r="10"
        />
        <Text2
          x="280" y="300" text-anchor="middle" fill="black">{findTropas("ESTADOS UNIDOS OESTE")}
        </Text2>
        <Path
        //Argentina
          fill="#c03"
          d="M396 495c0 2 0 3-1 3 0 0-1 1-2 3 0 2-3 3-3 3s-2 1-2 2 5 1 5 1c0 1-1 5 0 5 0 1 4-1 4 0 1 1 0 5 0 5s3 2 4 2c-2 0-5 2-4 3 0 0 1 1 0 1-2 0-2 0-3 1h-3c-2 0-2 1-3 1h-2c-1 0-1 0-1 1v1c1 0 3 1 3 1v2c0 1 0 1 1 1v1s-1 2-2 3c0 0-1 1-3 1h-2c-1 1-1 1-3 1h-3c-1 1-2 1-2 1l1 1c0 1 1 1 0 2 0 2-1 2-2 3v1h-3s0-1-1 1c0 1 1 2 1 2s-1 2-1 3 1 2 0 2v1c-1 1 0 1-1 2l-1 1c-1 1-2 1-2 1v2s-1 0 0 1 1 0 1 2c-1 1 0 1 0 1s1-1 1 3c0 3-1 4-1 4s-1 0 0 1v3c-1 1-1 0-2 2s0 4 1 5c0 1 1 1 1 2s-1 1 0 2c0 1 2 2 2 3v2c1 0 1 1 1 1v5c1-1 0-1 1-2h3l1-1c1 1 1 0 2 2 0 1 0 1 1 1 1 1 2 1 3 1s1-1 2 0c0 1 1 1 0 2h-3l-2 1c-1 0-1 1-2 1s0 1-2 0h-2c-1-1-2-1-2-2v-1l-3-2h-4l-1-1h-2v-2h-2v-1s-1 0-2-1c0 0-1 0-2-1l-1-1-2-2c-1 0-1 0-1-1 0 0-1 0-1-1-1-1 0-1-1-2s-1 0-2-1c0-1 1-2 0-3v-1c-1 0-1 0-1-1s0-2-1-2c0-1-1-1-1-2v-3c0-2 0-2-1-3l-1-1c0-2-1-2-1-3 1-1 1-1 1-2l1-1v-2c0-1-1 0 0-3s1-3 1-4c0 0 1-1 0-2v-2c0-1 1-1 0-2v-1s1 0 0 0c-1-1-1-1-1-2v-10c1-1 1-1 1-2s1-2 0-3v-2c0-1 1-1 1-2v-1c0-1-1 0 0-2 0-3 1-5 1-6v-2c-1 0-1-3-1-4v-2c1-1 1-1 1-2-1 0 0 0 0-1v-4c1-2 1-1 1-3 0-1-2-3-1-4 0-2 1-1 1-3-1-2-1-4 0-5v-6c1-3-1-5-1-5s2-2 3-2 1 2 0 3c0 1 1 2 2 3l3 3c0 1 1 2 2 3 0 1 0 2 1 3 2 1 2 0 3-1v-4c0-2 2 0 2 0s1 2 2 2c0 1 2 1 2 0 1-1 2-1 2-1 1 0 2 1 3 1 2 0 2 0 4 1 1 1 0 2 1 3 2 1 2 0 3 0 0 1 0 2 1 3 2 1 5 0 7 0 1 1 0 2 0 3s0 3-1 3c-1 1-2 2-1 4 0 1 3 0 4-1 2 0 2 0 4-2 1-1 5-3 5-3Z"
            onPress={stateMachine.bind(this, 9, "ARGENTINA")}
        />
        <Text2
            x="350" y="540" text-anchor="middle" fill="black">{findTropas("ARGENTINA")}
          </Text2>
        <Path
        //BRASIL
        name="Brasil"
          fill="#c36"
          d="m404 403-5 5c-1 1-1 3-2 3s-9 1-9 1 1 2 0 2h-12l-1-5s-2 1-2-1v-4s-3 1-4 2c-2 0-3 3-5 2-1 0-2-2-2 0 0 1 0 5-1 6-1 0-1-1-2 0s-4 2-4 1c-1-1-2-1-2-1-1-1-2-1-2-1-1 0-1-1-2 0l-3 3c0 1-1 3-1 4s2 1 2 3c0 1-1 2-2 2-1 1-6 2-6 2s-4 0-4 1 0 4-1 5-3 1-3 2c-1 1-3 1-2 3 1 1 2 2 3 2s3 0 3 1 3 1 5 2c1 1 5-1 4 1 0 2-4 3-4 4s0 4 3 4c2 0 5-2 7-2s3 0 4-1c0 0 1-2 2-2s3 1 4 2c1 2 1 3 2 3 2 0 1 1 2 1 2 1 3 0 4 1s1 3 2 3c2 0 4-1 5 0 0 1 1 3 2 4v2c0 1 2 1 3 2s1 1 2 3c0 2 1 2 2 3 0 2 2 5 1 6 0 1-1 3 1 4 1 0 2 1 3 2 1 2 1 1 2 2 1 0 1 2 1 5 1 2 4 3 4 5s0 3-1 3c0 0-1 1-2 3 0 2-3 3-3 3s-2 1-2 2 5 1 5 1c0 1-1 5 0 5 0 1 4-1 4 0 1 1 0 5 0 5s3 2 4 2c1-1 0-1 0-1 1-1 1-1 1-2 1-1 1-1 1-2 0 0 0-1 1-1 0-1 1-1 1-2v-2c0-1 2-2 3-2 2-1 1-2 2-3 0-2-1-1-1-2v-3c0-2 0-1 1-1 0-1 0-4 2-7 1-3 12-4 13-4 0 0 3-1 4-2l2-2c1 0 1-1 1-2s0-1 1-1c1-1 0-1 1-2s0-2 0-3c1 0 2-1 3-1s0-2 1-2c1-1 0-4 0-5 0-2 0-2 1-3 0-1-1-3-1-3l1-2s-1-2 0-3c0-1 1-1 2-2 2-1 1-4 1-4v-1s2-1 4-1 2-3 3-4c2-2 1-3 1-5 0 1 0 0-1-2v-3c0-2-1-2-2-3s-3-1-3-1l-3-3c-1 0-4-2-6-2-2-1-2-1-3-2s-1 0-2 0c0 0-1 1-2 0h-2c-1 0-2-1-3-1 0-1 0-1-1-2h-3c0-1-1-1-2-1h-2c-1 0-3-1-3-1-1 0-3 1-4 1s-2-2-3-2c-2-1 1 0 3-3 1-2-1-3-2-4 0-1 0-2-1-4l-1-3Z"
          onPress={stateMachine.bind(this, 10, "BRASIL")}
        />
        <Text2
            x="400" y="450" text-anchor="middle" fill="black">{findTropas("BRASIL")}
          </Text2>
        <Path
        //Venezuela
          fill="#f06"
          d="M317 414c2-1 1-3 1-4v-3c0-1 0-2 1-3 2-1 2-3 2-3l1-1v-2l1-2s1-1 1-2v-4l3-1s0 1 1 0c1 0 2-1 2-1l3-1 2-2 2-1h1c1 0 3-1 3-1l1-1c1 0 1-1 2-1l4-1s1 1 1 3c0 1 0 2 1 1h2c1 0 1-2 2-1s1 1 2 1h2l5 2h2c1-1 4-1 4-1s1 1 2 1c0 1 3 2 4 4 1 1 3 2 3 3 0 0 1 1 2 1 0 0 0 1 1 1h2v1c1 1 2 0 2 1 1 1 0 2 1 2h1l2-1s0-1 1 0 1 1 2 1 0 1 2 1c2 1 4 1 5 1 0 0 0-2 2 0 2 1 3 2 3 2l-5 5c-1 1-1 3-2 3s-9 1-9 1 1 2 0 2h-12l-1-5s-2 1-2-1v-4s-3 1-4 2c-2 0-3 3-5 2-1 0-2-2-2 0 0 1 0 5-1 6-1 0-1-1-2 0s-4 2-4 1c-1-1-2-1-2-1-1-1-2-1-2-1-1 0-1-1-2 0l-3 3c0 1-1 3-1 4s2 1 2 3c0 1-1 2-2 2-1 1-6 2-6 2s0-2-1-2c0-1-1-1-2-1-1-1-2-2-3-2h-4c0-1-1-2-3-2-1 0-2 1-3 0-1-2-3-4-4-5 0 0-3 0-2-1Z"
            onPress={stateMachine.bind(this, 11, "VENEZUELA")}
        />
        <Text2
            x="345" y="405" text-anchor="middle" fill="black">{findTropas("VENEZUELA")}
          </Text2>
        <Path
        //PERU
          fill="red"
          d="M347 472c1 0 1 2 0 3 0 1 1 2 2 3l3 3c0 1 1 2 2 3 0 1 0 2 1 3 2 1 2 0 3-1v-4c0-2 2 0 2 0s1 2 2 2c0 1 2 1 2 0 1-1 2-1 2-1 1 0 2 1 3 1 2 0 2 0 4 1 1 1 0 2 1 3 2 1 2 0 3 0 0 1 0 2 1 3 2 1 5 0 7 0 1 1 0 2 0 3s0 3-1 3c-1 1-2 2-1 4 0 1 3 0 4-1 2 0 2 0 4-2 1-1 5-3 5-3 0-2-3-3-4-5 0-3 0-5-1-5-1-1-1 0-2-2-1-1-2-2-3-2-2-1-1-3-1-4 1-1-1-4-1-6-1-1-2-1-2-3-1-2-1-2-2-3s-3-1-3-2v-2c-1-1-2-3-2-4-1-1-3 0-5 0-1 0-1-2-2-3s-2 0-4-1c-1 0 0-1-2-1-1 0-1-1-2-3-1-1-3-2-4-2s-2 2-2 2c-1 1-2 1-4 1s-5 2-7 2c-3 0-3-3-3-4s4-2 4-4c1-2-3 0-4-1-2-1-5-1-5-2s-2-1-3-1-2-1-3-2c-1-2 1-2 2-3 0-1 2-1 3-2s1-4 1-5 4-1 4-1 0-2-1-2c0-1-1-1-2-1-1-1-2-2-3-2h-4c0-1-1-2-3-2-1 0-2 1-3 0-1-2-3-4-4-5 0 0-3 0-2-1-2 2-2 4-3 6 0 2-1 3-2 5 0 2 1 1 2 3 0 2-1 1-1 3v5s1 2 1 3c1 0 3 3 3 3s-1 1 0 3c0 2 1 2 2 3 0 1 2 3 3 3 1 1 2 3 3 3 2 1 1 3 1 4-1 1 1 3 1 4 1 1 1 0 2 1 0 1 2 2 2 2 1 1 2 1 2 1l2 2c1 0 2 0 3 1 1 0 2 3 3 3 0 0 2 1 3 2 1 0 2-2 3-2Z"
            onPress={stateMachine.bind(this, 12, "PERU")}
        />
        <Text2
            x="345" y="465" text-anchor="middle" fill="black">{findTropas("PERU")}
          </Text2>
        <Path
        //GRAN Bretana
          fill="#33f"
          d="M466 294h-2c-1 0-1 0-2 1-1 0-2 0-3 1-1 0-2 1-2 1l-1 1h-3c-1 0 0-1-1-2 0 0-4 1-2 0 1-1 2 0 1-1s-2-1-1-1h2c0-1-1 0 0-1 1-2 1-2 2-3 1 0 0-2 1-1h2v-1h-3l-2-2c-1 0-2 1-1 0l1-2s-2-1-1-2c0 0 1 0 1-1s-2-1 0-2l2-2c1-1 1-1 2 0 0 0 0 1 1 0l2-2s-1 0 1-1 0-2 3-1h3c1 0 1-2 1 0 1 1 0 1 2 2 1 0 2 0 2 1l-1 1c1 1 1 1 1 2s0 1-1 2c-1 0-1-1-2 1-1 1-2 0-2 0h-1c0 1 0 2-1 1s-3-1-3-1v1c0 1 1 3 1 3s1 2 1 3c-1 1-3 1-1 1 2 1 1 0 1 1s0 2 1 2 2 1 2 1Zm12-11v-4c0-1-1-2-1-2 0-1-1-2-1-2-1-1-1-1-2-1l-1 1c-1 0-1 0-1-1-1 0-1-1-1-2s0 0 1-1l1-1v-3h-2v-1c-1-1-1 0-2 0-1-1 0-1 0-1 0-1 0-1-1-2 0-1 0 0-1 0l-1-1v-1l-1-1c0-1 1-1 1-1l2-2-1-1v-1h-3c-1-1 0-1 1-2 0 0 0-1 1-2 1 0 1 0 2-1 1 0 1 0 1-1s1-2 1-2c0-1 1-2 1-3s2 1 5 0 3 0 3 0 1 3-1 4c-3 1-1 5-1 5s1-1 2-1h1c1 0 1 0 2-1s1 1 1 1c0 1 1 3 1 3s-1 1-1 2v1h-1c-1 1 0 1 0 2-1 0-1 0-2 1v1c-1 1-1 1-2 1-1 1 0 1 0 2s1-1 3-1h2c1 0 1 0 1 1 1 0 0 1 1 1 0 1 0 1 1 1v3s1 3 2 4c2 1 1 1 2 1 0 1 2 4 2 4 0 1 0 1 1 3 0 1 0 1-1 2v3l2-1c2-1 1 0 2-1h2c1 0 1 1 2 2s0 1 1 1c0 1 0 1-1 2v1c-1 1 0 1-1 2h-2c-1 0 0 1-1 1v3s1 0 1 1c1 0 1 0 0 1 0 1-1 1-2 1-1 1-1 0-2 0s-1 0-3 1c-1 1-1 0-2 0h-2c-2 0-2 0-3 1s-1 0-1 0c-1 0-1-1-1-1-1-1-1-1-2 0 0 0-1 2-2 2-1 1-1 0-2 0h-1l-2 2c-1 1-1 0-2 1-1 0-1 0-1-1v-1c1 0 2-2 2-2l2-2c2 0 1 0 1-1 1-2 1-2 2-2 0 0 1-1 0-2-1 0-2 0-3-1-1 0-2 0-2-1l2-2c0-1 0-1 1-1l1-1c1 0 1 0 1-1v-2s1-1 0-2h-1l-1-1v-3s1 0 2 1c1 0 2 2 2 2s1 0 0 0Z"
            onPress={stateMachine.bind(this, 13, "GRAN BRETANA")}
        />
        <Text2
            x="455" y="310" text-anchor="middle" fill="black">{findTropas("GRAN BRETANA")}
          </Text2>
        <Path
        //ISLANDIA
          fill="#36c"
          d="M474 212s2 2 2 1c1-1-1-2 1-1 1 1 1 1 2 1 0 1 3-1 2 1s-2 2-1 2 0 0 1 1 1 2 2 1l1-4s4 0 4 1c-1 2-1 2 0 1 2-1 1-3 3-2 1 1 1 2 2 1 0-1-1-2 0-2 2 0 2 2 3 0s0-3 1-2c1 0 1 0 2-1 1 0 1-1 2 0 1 0 1 1 1 1h2c1 1 0-1 0 1 1 2 1 3 2 3 0-1 1-1 1 0 0 2-2 2 0 2 1 0 2 0 2 1s1 2 1 2v1c0 1-1 1 0 2v1c-1 1-2 1-3 1 0 0-1 1-1 2 0 0 1 0-1 1-1 2 0 2-1 2s-2 1-2 1h-3l-1-1s0-1-1-1v2c-1 0-2-2-2-1s1 3 1 3 0 1-1 1c0 1 0 1-2 2-2 0-2 0-3 1-1 0-1 1-2 0-2-1-7-3-7-3-1 0-2 1-3 0-2 0-3 1-3 0-1-1-1 1 0-1 0-2 2-3 2-3v-1s0-1-1-1l-1-1c0-1 0-1-1-1s-2 1-3 0-1-1-1-2c1 0 1-1 2-1s1 1 2 0c0-2 1-2 1-2s-1-1-2-1c-1 1 0 2-1 0s-2-2-2-2-1 0 0-1l2-2c0-1-1-2 0-3s1 0 1 0h1Z"
            onPress={stateMachine.bind(this, 14, "ISLANDIA")}
        />
        <Text2
            x="480" y="210"  text-anchor="middle" fill="none" >{findTropas("ISLANDIA")}
          </Text2>
        <Path
        //EuropaNorte
          fill="#33c"
          d="M563 263h1c1 1 1 2 2 3l3 1h3v1s0 3 1 4v9c0 1 2 3 2 3l1 1c0 1-1 2-1 2v2c0 1-1 1-1 1-1 1-1 2-1 2 0 1-1 1-1 1-2 2-2 5-5 5-1 0-2 1-3 1v2l3 2-1 1-1 1c-1 0-1 1-1 1 0 1-1 1-2 2s-2 4-2 4v3s1 1 1 2-1 2-1 2h-9v-4l-1-1c0-1 0-2 1-2v-2c1-1 0-2-1-2l-2-1s0 1-1 1c-1 1-1 1-2 1s-5 1-5 1v2s-2 2-2 3c-1 0-2 1-3 1h-2c-1 0-1 0-2 1-1 0-2 1-3 1s-2-2-2-3h-1s-1 1-2 1c-1 1-1 1-2 1s-1-1-1-1-1 0-1-1c-1 0-1-1-1-2 0 0-1 0-1-1v-1l-1-1c-1 0-1-1-2-3l-2-2-1-3-1-1c0-1 1-3 2-3 0 0 1 0 1-2v-2c1 0 2 0 2-1 1-1 0-2 0-2 0-1-1-1 1-1 2-1 3 0 3-1 1-1 1-1 1-2s1-1 1-2c1-1 0-1 1-2 0 0 0-4 1-4 0 0 0 1 1 0 0-1 0-2 1-3 0-1 0-1 1-1 1-1 1 0 1-1 1-1-1-1 1-2l2-1c0-1 1-1 1-2v-6c1-1 1-1 0-1s-1 1-1 0v-2c-1-1-1-2-1-2s-1 0 0-1c0-1 1-2 1-2l1-1c1 0 1 1 1 0 1-1 0-1 1-1h2l-1 1v1s1 1 1 2c1 2 1 2 1 3l-1 3s0 1 1 2 1 1 2 1h7l1-1h5c0-1 0 0 1-1 1 0 2-1 2-1h2c1 0 2-1 3 0h2c1 0 1 1 2 0Z"
            onPress={stateMachine.bind(this, 15, "EUROPA NORTE")}
        />
        <Text2
            x="540" y="290"  text-anchor="middle" fill="none" >{findTropas("EUROPA NORTE")}
          </Text2>
        <Path
        //Escandinavia
          fill="#3cf"
          d="M579 237c-1-1-2-1-2-2-1 0-1-1-2-1h-2c-1 0-2-1-3-1-1 1 0 1-1 1-1 1-3 1-4 1h-2c-2 0-3 1-3 0-1-2-1-1-1-3 0-1 1-2 1-3s0-2 1-3c0-1 1-2 1-2 1-1 1-2 1-2v-4h-2c-1-1-1-1-2 0s-2 1-2 2v3c-1 1-1 1-1 2v1c-1 1-1 1-2 1-1 1-2 0-2 2v2c1 1 1 1 1 2s1 1 1 3v2s1 1 1 2c-1 1-1 3-1 3-1 1-1 2-2 2 0 1 0 1-1 2s-1 1-2 1c-1 1-1 2-1 2v2s1 2 0 2c-1 1-2 1-2 2-1 1 0 2-1 3s-1 1-2 1c-2 0-2 0-3-1 0-1-1-2-2-2h-1s0-1-1-1c0 0-1 1-1 0v-6l-2-3 1-1-1-2h-1s-1 0-1 1v1c-1 1-2 2-3 2-1 1-2 1-2 1s0 1-1 0c-1 0 0 0-1-1s-1-2-1-3l-1-1-1-1c-1 0-1-1-1-2v-3c1-2 0-3 0-3l-1-1v-1c-1-1-2-2-2-3 1-1 0-2 2-3 1 0 1 2 1-1 0-2-1-1 1-3l1-2s1 0 2 1c0 2 0 3 1 2 0-1 1-2 1-3l2-2s-2-2 0-2 2 1 2 0c1-1 1-1 2-1 1-1 1 0 2-1 0-2 0-2 1-2 1-1 1-1 1-3 0-1 0-1 1-3 2-2 2-2 2-3 1-2 1-2 1-3 1 0 2 0 2-1 1 0 1-1 1-1l1-2s-2-1 0-1c1-1 1-1 3-2h2s1 2 1 0c0-1 0-1 1-2s1 0 2 0h1s1 1 2 0c0-1-2-2 0-3s3 0 3-1c1 0 0-1 1-1 1-1 1 0 2-1 2 0 2-1 2-1h2c0 1-1 1 1 1s5-2 6-1c1 0 0 2 1 2s2-1 3-1c0 1 0 1 1 1 0 0 1 4 0 5 0 0 1 4 0 4-1 1-1 6-1 9s1 7 1 9 1 5 1 5v2c0 2 1 3 1 3h1c0 1 0 2-1 2v3c-1 1-1 1-1 2v3c0 1 1 3 0 3Z"
            onPress={stateMachine.bind(this, 16, "ESCANDINAVIA")}
        />
        <Text2
            x="530" y="230"  text-anchor="middle" fill="none" >{findTropas("ESCANDINAVIA")}
          </Text2>
        <Path
        //EuropaSur
          fill="#39f"
          d="M567 303v-1l1-1s2 0 3 1v3c1 1 1 1 2 1h2s0 1 1 2c0 1 0 2 1 2v4c0 1-1 1-1 1v2l1 1v4c0 1 1 1 1 2-1 0 2 2 2 2l-1 1c1 1 1 2 1 2 0 1 0 1-1 1 0 1-1 1-1 2s1 1 1 2c-1 1-1 1-1 2-1 0-1 1-1 2-1 1 0 1-1 1-1 1-1 1-1 2v1c-1 1-1 1-1 2-1 0-1 0-2 1v1c-1 1-1 0-1 1-1 1 0 1 0 2s1 1 0 2l-2 2s0-1-1 1c0 1 1 1 0 1-1 1-1 1-2 1h-3c0 1-1 1 0 2l1 1 1 1c1 1 1 1 1 2v1s1 2 0 2c0 0-1 0-1 1v1c1 1 0 1 1 2l1 1c1 1 2 1 1 1 0 1-1 1-2 1 0 0-1 0-1-1l-1-1h-1c0 1 2 1 0 1-3 0-2 1-3 0s0-1-1-1h-1c-1-1-1-1-1-2s1-1 0-3v-2c-1-1 0-1 0-2s-1-1-1-1v-2c-1-1-1-1-1-2 0-2 0-2-1-2 0 0 0 1-1 0s0-1-1-2c-1 0-1 1-1 0-1-2-1-1-1-3v-2c0-1 1-1 0-2l-1-1c-1 0-1 1-2-1-1-1-1-2-2-2s-1 1-1 0c-1-1 0-1-1-1-1-1 0-1-1-1-2 0-2-1-3-1-1 1-1 1-1 2v1c0 1 0 2 1 2 0 0 0-1 0 0 0 2 0 3 2 2 1-1 2-1 2-1v2c1 1 0 2 1 3 1 0 1 0 2 1h1c0 1 0 2 1 3 0 1 1 0 1 1-1 1-1 2-1 2-1 0-2 1-3 0 0-1-1-1-1-1s1-1-1-1c-1 0-1 1-2 1s-1-1-1 0l2 2s1 0 1 1c-1 1 0 1-1 2 0 1 0 1-1 2v2c-1 1-1 2-2 2s-1 0-1 1c-1 1-1 1-1 2h-3c0 1 1 1-1 1l-1-1h-2v-2c-1 1-1 2-2 1 0-2 0-2-1-2v-1c-1-1-1-1 0-2s1-1 2-1h1c1 0 1 1 1 1 1 0 3-1 3 0v1c1-2 1-2 2-3 0-1 1-2 2-2v-2c-1-1-2 0-2-2s1-2 0-3c0-1 0 0-1-1-1 0-1-1-1-1-1-1-2-1-3-2 0 0 0 1-1-1-1-1-1-1-2-1 0 0 0 1-1 0 0-1 0-1-1-1 0-1 0 0-1-1-1 0-1 0-1-1v-2c-1-1-2-1-2-1h-4s3 0 1-2c-2-1-2-3-2-3 1 0 2-1 2-2s1-2 0-2c0-1-2-2-2-2l-1-1c0-1 1-2 1-2s1 1 1-1v-3c0-1-1-2 0-2 1-1 1-2 2-2 0-1 0-1 1-1s1 0 2-1c1 0 2-1 2-1h1c0 1 1 3 2 3s2-1 3-1c1-1 1-1 2-1h2c1 0 2-1 3-1 0-1 2-3 2-3v-2s4-1 5-1 1 0 2-1c1 0 1-1 1-1l2 1c1 0 2 1 1 2v2c-1 0-1 1-1 2l1 1v4h9s1-1 1-2-1-2-1-2v-3s1-3 2-4 2-1 2-2c0 0 0-1 1-1l1-1 1-1Z"
            onPress={stateMachine.bind(this, 17, "EUROPA SUR")}
        />
        <Text2
            x="550" y="350"  text-anchor="middle" fill="none" >{findTropas("EUROPA SUR")}
          </Text2>
        <Path
        //RUsia
          fill="#36f"
          d="M580 188c-1 0-2-1-2-1s1 4 0 5c0 0 1 4 0 4-1 1-1 6-1 9s1 7 1 9 1 5 1 5v2c0 2 1 3 1 3h1c0 1 0 2-1 2v3c-1 1-1 1-1 2v3c0 1 1 3 0 3-1-1 1 0 1 0 1 1-1 1-2 2h-3c-1 0-1-1-2 0h-6c-1 1-1 2-1 3s1 0 1 2c0 1 1 1 1 1 0 1 1 1 1 1s2 1 2 2v3c0 1-1 1-2 0-2 0-1 0-2-2 0-2 0-1-1-1-1-1-1 0-1 1l-2 2v3c0 1-1 1-1 2-1 0 0 1 0 2 1 1 1 2 1 2 1 0 1 1 1 2l-1 1h1s1 1 1 2l1 1 3 1h3v1s0 3 1 4v9c0 1 2 3 2 3l1 1c0 1-1 2-1 2v2c0 1-1 1-1 1-1 1-1 2-1 2 0 1-1 1-1 1-1 0-3 4-3 4 0 1-2 1-2 1-1 0-2 1-3 1v2l3 2v-1l1-1s2 0 3 1v3c1 1 1 1 2 1h2s0 1 1 2c0 1 0 2 1 2v4c0 1-1 1-1 1v2l1 1v4c0 1 1 1 1 2-1 0 2 2 2 2l1-1s1 0 2-1v-1s0-2 1-3h2c2-1 1 0 2 0h2c1 1 1 1 1 2v3c1 0 1 1 1 1 0 1 1 1 2 2 1 0 0 0 2 1 1 1 0-1 1-2 0-1 1-1 1-1 1 0 1-1 2-1v-1c1-1 0-2 0-2 0-1-1 0-1 0-1 0-2-1-2-2-1 0-1-1-1-1s1-1 2-1c1-1 1-1 2-1h2c0-1 1-1 2-1h4s0-1 1-1c0-1 1 0 1 0v1l-2 2c-1 1-1 0-2 1-2 0-1 0-1 1s-1 1-1 1v2h1v2c0 1 1 0 2 0 0 1-1 1-1 2s2 2 2 2c1 1 1 1 1 2 1 1 1 0 1 0 1-1 1-1 2-1h1v2l1 1c1 1 1 2 2 2s0 0 1 1c0 0 1 1 2 1l1 1c1 0 1 0 1 3s1 0 1 0 0 1-1 2c0 0-1 0-1 1-1 0-1 1-1 1 0 1 0 1 2 2 1 1 1-1 1-1h4s0-1 1-1h2c1-1 1-1 2-1 0-1 1-1 2-1h1c3 0 1 0 1-1s1-1 1-1h1c1-1 1-1 1-2l-1-1s-1-1-1-2 0-1 1-1v-6c0-1 1 0 1-1 1 0 0-2 0-2h-2c-1 0-1 0-2-2-1-1 0-1 0-2-1 0-1 0-1-2 0-1-1-3-1-3h-1l-1-1v-2c1-1 0-2 0-2l-1 1s1-3 2-4v-2c0-1 1 0 2-1 1 0 1-1 1-1s1-1 0-3v-3c0-1-1-1-1-1l-1-1s-1 0-2-1v-4s-1-2-2-3v-3c0-1 0-1 1-2 0-1 1-2 2-2s0-2 0-2 1-3 2-3l3-1c3 0 1 0 2-1s2-1 2-1h2c1 0 3-1 3-1l2-1c1-1 2-1 2-1l1 1h1s2 1 3 1h2c1 0 1 0 2-2 1-1 1-1 1-3 0-1 3-1 4-1l2-2c1 0 0-1 0-3v-3c-1-1-1-2-1-3 0 0 1-1 2-3 1-1 0-2 0-3s-2-1-2-1l-3-2-1-1s-1-1 0-3c0-2 1-2 1-3 1-2 1-3 1-4s-2-1-2-1v-9c0-1 0-4-1-4 0-1 1-3 1-3s-1-2-1-3c-1-1 1-4 1-4l2-5 1-2v-4c1-1 1-4 1-4s-1-7-2-7c0-1-1-1-1-2-1-1-2 0-3 0s-2-1-3-1h-3c-1-1-2 0-3 1 0 1 0 1-1 3-1 1-2 0-3 1-1 0-1-1-2-1-1-1-2 0-3 0s-1 0-3-1c-1-1-1-1-3 1s-2 1-3 1-2 1-2 1l-3 3s-3 1-4 2 0 1-2 2c-1 1-1 0-1-1s0-1 1-2c0-2 0-1-1-1s-1-1-2-2c0-1 0-1-1-2-1 0-2 1-3 1h-2c-1 0 0 1 0 2l1 1v4c0 1 1 1 1 1 1 1 1 1 1 2s-1 0-2 0-2 1-3 2h-2c-1 0-1 1-2 2-2 2-2 1-3 1s-1-1-2-1c-2-1-1 0-2 0s0 1 1 2c0 1 1 2 1 2s0 1-2 2c-1 2-1 0-2 0h-2c-1 0 0 0 0-1v-2c0-1-1-1-1-1v-2c-1 0-1-1-2-1h-2s0-1-1-1l-2-2c-1 0 0-1 0-1 0-1 2-1 3-1s4 1 6 1h4c1 0 3-1 5-1 1 0 2-1 3-2v-2c0-1-1-1-1-2-1-1-1-1-4-3-4-3-4-1-5-1s-1-1-2-1h-8c-1 0-1-1-2-1h-2c-1-1-1-1-2-1-1-1 0 0-1 0Z"
            onPress={stateMachine.bind(this, 18, "RUSIA")}
        />
        <Text2
            x="595" y="270"  text-anchor="middle" fill="none" >{findTropas("RUSIA")}
          </Text2>
        <Path
        //EuropaOccidental
          fill="#39c"
          d="M521 317c-1 0-1 0-1 1-1 0-1 1-2 2-1 0 0 1 0 2v3c0 2-1 1-1 1s-1 1-1 2l1 1s2 1 2 2c1 0 0 1 0 2s-1 2-2 2c0 0 0 2 2 3 2 2 1 2 1 2h-2v1c-1 1-1 1-2 1-1 1 0 1-1 1h-1c0-1 0-1-1-1s-1 0-1-1c1-1 1-1 0-1s-1 1-2 0h-2l-2 3v2s-1 0-1 1 1 1 0 2c-1 0-1 1-1 1-1 0-1 0-1 1-1 0-1 0-1 1v1c0 1 1 1 1 1v2l-1 1v2c1 1 1 2 1 2l1 1s0 1 1 2c0 1 1 1 0 2s-3 1-4 3-1 4-2 5 0 1-1 1-2-2-3 0c0 1-1 2-2 2s-1-1-1 1v2s0 1-1 1h-2c-1 0-1 0-1-1-1 0-1-1-1-1-1-1-1-1-2-1s-1 0-1-1c-1-1-1-1-2-1 0 0 0 1-1 0s-1-2-2-2l-1 1s0 1-1 0h-3c-1 0-1 1-2 0-1 0-2 0-2-1s1-1 0-2c0 0 0-1-1-1 0-1 0-1-1-1h-2c0-1-1 0 0-1v-2c1-1 1-1 1-3 1-1 1-1 1-3 1-1 1-1 1-2s0-1 1-2v-2c0-1 1-1 0-1 0-1-2-2-2-3-1 0-1 0-1-1 0-2-1-1-1-2v-2c0-1-1-1-1-2 0 0 0-1 1-1 0-1 1 0 2-1s1-1 1-2 1-1 1-1h1c1 1 1 1 1 2 0 0-1 0 1 1h5c1 0 1-1 1-1h3c1 0 1 1 1 0 1 0 1 1 2 0 0 0 1 0 1-1 1-1 0-1 1-2s2-1 3-1-1-2-2-2c0 0-1 1-1 0 0 0 0-1 1-2 0-1 1-1 1-1s0-1-1-2c0 0 2-1 1-2-1 0-2-1-2-1-1 0-1 1-2 0v-3c-1 0-1 0-2-1s0-1-1-2-2-1-3-1-1 1-1 0c0-2 0-2 1-3 1 0 3-1 4-1s0-1 2 0h2c1 0 2 1 2 1s1-2 1-3c1 0 1 0 1-1s1-1 2-2c1 0 2 1 2 1s-2 1 0 1c1-1-1-3 2-2 3 0 4 2 4 0s0-2 1-3c0-1 0-1 1-2 2 0 1-2 3-3h2c1 0 1 0 2-1l1 1 1 3 2 2c1 2 1 3 2 3l1 1v1c0 1 1 1 1 1 0 1 0 2 1 2 0 1 1 1 1 1l1 1Z"
            onPress={stateMachine.bind(this, 19, "EUROPA OCCIDENTAL")}
        />
        <Text2
            x="480" y="360"  text-anchor="middle" fill="none" >{findTropas("EUROPA OCCIDENTAL")}
          </Text2>
        <Path
        //Congo
          fill="#f93"
          d="M595 514c-1 1-1 0-2-3 0-3-1-10-1-11 1-1 3 1 4 0v-7c0-2 2-1 4-1 1-1 2-2 2-4 1-1 1-1 2-1s1-2 1-3c1-1 2-2 2-4 0-1-2-2-4-3-2 0-2 1-5 1-3-1-4-1-5-1s-1-2-2-2c-1-1-2 2-2 2s-1-1-3-4c-1-3-3-4-3-4-1 0-1-3-1-4s-2-1-3-2c0-1 0-2-1-2s-2 0-2-3c0 0-1-3-1-4 0 0-3 3-3 4 0 0 1 2-2 3-2 1-3 1-5 2-1 0-2 2-2 2-1 1-3 1-3 1-1 1-2 1-3 2 0 1-1-1-1 2v4s2-2 2 1c-1 4-2 5-1 6 0 2 1 2-1 3-1 1-2 0-2 0s-1-2-2-1c-2 0-2 1-4 0h-3l-2 1c-1 0-1-1-2-2-1 0-1 2-1 2 0 1 1 2 0 2 0 1-1 2-1 3-1 1-4 2-3 3 1 2 8 7 9 10l2 2c0 1 3-1 3-1 1 1 3 2 4 3 1 0 5-1 6 0l1 1v4c1 1 3 2 3 1 1-2 8-2 8-1 1 1 0 3 1 4s2 1 2 2-2 2-1 4c0 1 2 2 3 1 2 0 2 1 3 2h7c0 1 1 2 2 2 0 1 1 3 2 2s2-5 1-6c-2 0-2 0-2-2 0-1 0-4 1-4l1-1s4 0 3-1Z"
            onPress={stateMachine.bind(this, 20, "CONGO")}
        />
        <Text2
            x="560" y="495"  text-anchor="middle" fill="none" >{findTropas("CONGO")}
          </Text2>
        <Path
        //Africa Oriental
          fill="#c60"
          d="M575 454s-1-2-2-3 0-3 0-4 0-1 1-2v-1l1-2v-2c0-1 0-1-1-1s0 0 1-1 0-2 1-3c0-1-1-5-1-6 0 0 2-1 3-1 0 0 0-5 2-5 1-1 29 1 29-1v1c0 1 1 1 1 1s2 1 2 2c1 1 1 0 1 1 0 0 0 3 1 4 0 2 0 1 1 2s1 0 1 2 1 2 2 4c1 1 0 0 0 2 1 1 1 2 1 3 1 1 1 1 2 1v1c0 2 3 2 4 4l2 2c0 1 0 1-1 3s0 2 1 3c0 1 4 1 4 1s3 0 4-1l1-1c1-1 4 0 7-1 2 0 6-3 7 0 2 2-4 13-6 18s-8 10-12 14c-4 3-7 8-7 8 0 1-1 2-2 2l-2 2c-1 1-1 1-3 2-1 1-1 2-1 3v2c-1 1 0 3 0 4v3s0 1 1 1c2 1 1 6 1 6s-2 2-3 2-2 1-2 1-1 0-2 1c-2 0-3 0-4 1-1 2 0 2 1 5 1 2-1 1-1 2v4c0 1-1 2-2 2 0 1-2-1-3-2-1-2 0-4 1-5 0-2-2-4-2-5v-3c1-1 1 0 0-2 0-2-1-2-2-3 0 0-1-2-2-2s-1-1-1-2-2-1-2-1c-1 1-1 0-2-3 0-3-1-10-1-11 1-1 3 1 4 0v-7c0-2 2-1 4-1 1-1 2-2 2-4 1-1 1-1 2-1s1-2 1-3c1-1 2-2 2-4 0-1-2-2-4-3-2 0-2 1-5 1-3-1-4-1-5-1s-1-2-2-2c-1-1-2 2-2 2s-1-1-3-4c-1-3-3-4-3-4-1 0-1-3-1-4s-2-1-3-2c0-1 0-2-1-2s-2 0-2-3c-1-2-1-4-1-4Z"
            onPress={stateMachine.bind(this, 21, "AFRICA ORIENTAL")}
        />
        <Text2
            x="590" y="465"  text-anchor="middle" fill="none" >{findTropas("AFRICA ORIENTAL")}
          </Text2>
        <Path
        //Egipto
          fill="#f90"
          d="M575 429c0-1-4 0-5 0l-1-1s-1-3-1-4-3 1-4 0v-2c0-2-2-1-3-1s-2-1-3-2c-1 0-2 1-3 1-2 0-2 0-2-1-1-1-2 0-4 0s-1-1-2-2-2 0-4-1c-2 0-1-1-1-2-1-1-2-1-2-1v-7c0-1 0-3-2-4-1 0 0-2 0-2v-2c0-1 1-2 2-2s1-1 1-1l-2-4c0-1 2-1 2-1v-1s1 0 2-1c2-1 1-3 1-3h3c2 1 2 1 3 2s1 2 3 2c2 1 3 1 4 1s4-1 4-1c1-1 3-1 9-1s6 3 7 3c2-1 3 0 4 0s3 1 4 1 3 1 3 1c1 0 6 2 7 2l2-2 1 1h1c1 0 1-1 1-1l2-1 2 4s-1 3-1 4v2c-1 1-1 0-2 0l-3-3c-1-1 0 3 0 3s3 4 7 10 0 3 1 4c1 2 2 2 2 4 1 3 0 1 1 3v-1c0 2-28 0-29 1-2 0-2 5-2 5-1 0-3 1-3 1Z"
            onPress={stateMachine.bind(this, 22, "EGIPTO")}
        />
        <Text2
            x="570" y="420"  text-anchor="middle" fill="none" >{findTropas("EGIPTO")}
          </Text2>
        <Path
        //Madagasgar
          fill="#c63"
          d="M659 534c1 1 1 0 1 3 0 2 1 5-1 3-1-2-1-3-1-1v3s1 2 0 2h-2v2l-1 1-1 3s2 0 1 2c-1 1-1 2-1 2v2c-1 3-1 4-1 4s1 0 0 1c-2 2-2 3-2 4-1 0 0 1-1 2l-2 2-1 1v2c0 1-1 1-1 1v1c0 1 0 2-1 2-1 1 0 1-2 2-1 1-1 0-1 2s0 2-1 2-10 1-11 0c-2 0 1-7-1-8s-3-6-2-6l1-1 2-2c0-1 1-1 1-1s-1-3 0-3v-2s0-2 1-2c1-1-1-2 1-2 1-1 2 0 2-1s-1-1-2-1c0 0-1 0-1-2 0-1 0 0-1-1 0-2-1-1 0-3 2-1 2 0 2-2 0-1-1-2 1-2 1 0 2 0 4-1h2c3 0 3 1 4 0s2-1 2-2 0-2 1-2c2-1 2 0 3-1 0-1 1-2 1-3s-1-1 0-1c2 0 2 0 3-1v-2c1-2 0-2 1-3 1 0 3-2 3-2s0-1 1 1 0 2 1 3 1 0 1 1v3l-2 1Z"
            onPress={stateMachine.bind(this, 23, "MADAGASCAR")}
        />
        <Text2
            x="650" y="562"  text-anchor="middle" fill="none" >{findTropas("MADAGASCAR")}
          </Text2>
        <Path
        //Africa Norte
          fill="#f60"
          d="M544 385c-1-1-1-1-1-2-1-1-1-2-2-2-1-1-1 1-2-1 0-2 0-4-1-4l-2-2-2-2-2-1h-8l-2 2c-1 0-4 2-4 2h-4s0 1-1 2-3 2-4 1h-2c-2 0-3 2-4 2-1-1-2 0-3 0-1 1 0 1-2 1h-8c-1 0-2 1-2 1v5l-3 4s0 2-1 5l-2 4-1 4-2 1c0 1 1 2 0 2 0 1-1 0-2 2 0 1-1 2-1 3 0 0 1 1 0 2s-2 1-2 3-1 4 0 5 1 2 1 4v3c0 2 1 2 1 3 0 2-1 3-1 5s-1 2-1 4-3 3-1 4c2 2 2 3 2 5 1 1 5 1 5 4s4 3 4 4c0 2-1 4 2 5 3 2 3 3 4 4 0 0 3 1 4 2 0 0 1 2 2 2 0 1 1 2 3 2s2 0 6-1h11c1-1 1-2 2-3h10c1 1 1 0 2 2s-1 4 3 4c5 0 8-1 9 0 0 1-2 3-2 4 1 2 1 2 1 3 1 1 1 2 2 2l2-1h3c2 1 2 0 4 0 1-1 2 1 2 1s1 1 2 0c2-1 1-1 1-3-1-1 0-2 1-6 0-3-2-1-2-1v-4c0-3 1-1 1-2 1-1 2-1 3-2 0 0 2 0 3-1 0 0 1-2 2-2 2-1 3-1 5-2 3-1 2-3 2-3 0-1 3-4 3-4s-1-2-2-3 0-3 0-4 0-1 1-2v-1l1-2v-2c0-1 0-1-1-1s0 0 1-1 0-2 1-3c0-1-1-5-1-6s-4 0-5 0l-1-1s-1-3-1-4-3 1-4 0v-2c0-2-2-1-3-1s-2-1-3-2c-1 0-2 1-3 1-2 0-2 0-2-1-1-1-2 0-4 0s-1-1-2-2-2 0-4-1c-2 0-1-1-1-2-1-1-2-1-2-1v-7c0-1 0-3-2-4-1 0 0-2 0-2v-2c0-1 1-2 2-2s1-1 1-1l-2-4c0-1 2-1 2-1v-1s1 0 2-1c2-1 1-3 1-3Z"
            onPress={stateMachine.bind(this, 24, "AFRICA NORTE")}
        />
        <Text2
            x="510" y="440"  text-anchor="middle" fill="none" >{findTropas("AFRICA NORTE")}
          </Text2>
        <Path
        //Sudafrica
          fill="#f63"
          d="M547 504c0 1 3-1 3-1 1 1 3 2 4 3 1 0 5-1 6 0l1 1v4c1 1 3 2 3 1 1-2 8-2 8-1 1 1 0 3 1 4s2 1 2 2-2 2-1 4c0 1 2 2 3 1 2 0 2 1 3 2h7c0 1 1 2 2 2 0 1 1 3 2 2s2-5 1-6c-2 0-2 0-2-2 0-1 0-4 1-4l1-1s4 0 3-1c0 0 2 0 2 1s0 2 1 2 2 2 2 2c1 1 2 1 2 3 1 2 1 1 0 2v3c0 1 2 3 2 5-1 1-2 3-1 5 1 1 3 3 3 2 1 0 2-1 2-2v-4c0-1 2 0 1-2-1-3-2-3-1-5 1-1 2-1 4-1 1-1 2-1 2-1s1-1 2-1 3-2 3-2 3-1 2 0c0 1 1 4 1 4v2c1 1 0 1 1 2 0 1-1 2-1 2v3c0 1 0 3-1 4 0 0-1 0-1 1-1 0-1 1-2 2s-1 1-1 2c-1 2-1 1-2 3l-1 1c-2 0-2 1-3 1 0 0-2 2-2 6-1 5 0 6 0 7s-3 4-3 5-1 1-2 1c-1 1-1 3-1 4 0 0 0 3-2 4-1 1 0 1 0 2 1 0 1 1 1 2-1 2-2 1-3 2-1 0-3 3-3 4 1 1 2 1 2 1s-2 2-4 3c-1 2 1 2 1 3s-1 0-2 0c0 0-1 0-1 1-1 1-2 1-5 1-4 1-1 2-3 3s-2 1-7 1-3 1-4 1c-1 1-1 1-2 1s-2 0-3 1l-1 1-1-1c0-1-1-1-2-1s-1 0-2-1 0-2 0-2c0-1-1-3-1-4v-8c-1 0-2-1-2-3v-3c0-1-1 0-1-1-1 0-1-1-2-2v-5c0-1 0-1-1-2 0-1-1-3-1-4-1-1-1-2-1-3s0-1 1-2c0 0-1-1-1-2l-3-3-1-1c0-1-1-2-2-3s0-1 0-2v-3c-1-1-2-3-2-3v-3c1-1 1-1 1-2v-2c0-1 0-1 1-2 0-1 1-1 1-2 0-2 1-3 1-3 0-1 1-1 1-2 1-1 0-1 0-2v-2c0-1-2-4-3-5 0-1 2-3 4-5 2-3-4-8-4-9Z"
            onPress={stateMachine.bind(this, 25, "SUDAFRICA")}
        />
        <Text2
            x="570" y="580"  text-anchor="middle" fill="none" >{findTropas("SUDAFRICA")}
          </Text2>
        <Path
        //Afganistan
          fill="#3c0"
          d="M707 296c-1 0-1-2-2-2l-1-1v-3l-2-1h-3c-1 0-3 0-4-1 0 0 0-1-1 0h-3l-2-1s-1 0-1-1c-1 0-1-2-2-2 0-1-1-2-1-2-1 0-1-1-2-2 0 0-1 0-2-1 0 0-1 0-1-1 0 0 0-1-1-1h-1s0-2-1-2c0-1-1-2-2-2s-1 0-2-1v-1s-2-1-2-2l-1-1-1-2h-2l-2-1v1c-1 0-1 0-2 1-1 0-4 0-4 1 0 2 0 2-1 3-1 2-1 2-2 2h-2c-1 0-2-1-2-1h-2l-1-1s-1 0-1 1c-1 0-3 1-3 1s-2 1-3 1h-1c-1 0-2 0-3 1 0 1 1 1-2 1-2 1-2 1-3 1s-2 3-2 3 1 2 0 2-1 1-2 2c0 1-1 1-1 2 1 1 0 2 1 3 0 1 1 3 1 3s1 0 0 1v3c1 1 2 1 2 1l1 1s1 0 1 1 1 2 1 3c0 0 1 2 1 1 1 0 2-1 2-2s0-2 1-2h2c1-1 1-1 2-1s1 0 1 1c1 1 0 0 1 2v4c0 2 0 2-1 2-1 1-3 2-3 3v2c0 2 0 3 1 3 1 1 1 0 1 2 0 1-1 1 0 1h3s2 0 1 2c0 1-1 0 0 2 0 1 0 0 1 2 0 2-1 2 0 2s2 1 2 1l1 2v2s-2-1-2 0c0 2 1 2 1 2s2 0 2 1v3c0 1 1 1 1 2v2c1 1 2 1 3 1 0 0 1-2 2-2h2c0 1 1 1 2 1 0 0 1 0 1 1 1 1 1 1 2 1v2c0 1 1 1 2 1h2c1 0 2 2 2 2 0 1 1 1 1 1s3 0 3-1c1-1 3-3 3-4 0 0 0-2 1-2 0 0 2-1 3 0 1 0 2 0 3-1 0-1 0-4 2-4 1 0 2-1 3 0s4 3 4 3 3 0 5-1c1-1 2-3 2-4v-2c0-1-1-4-1-4s0-1-1-1-2-2-2-2v-3s0-4 1-4l2-1h3c1-1 1-5 2-6 0-1 0-2 1-2s2 0 2-2c0-1 0-5-1-6s-1-2-1-3l1-1v-2Z"
            onPress={stateMachine.bind(this, 26, "AFGANISTAN")}
        />
        <Text2
            x="670" y="330"  text-anchor="middle" fill="none" >{findTropas("AFGANISTAN")}
          </Text2>
        <Path
        //China
          fill="#3f0"
          d="M802 324c-1 0 0 0 0 1v1c0 1 1 1 1 1 1 0 0 1 0 2s0 1 1 1 1 0 1 2c0 1 1 0 2 0l1 1c0 1 0 1-2 1-1 1 2 1 3 2 1 0 1 2 1 3-1 1 0 1 1 3 1 1 0 2-1 4-1 3 1 2 2 2s1 4 0 5c-1 2 0 2 0 4s0 2-1 4c0 2 0 1-1 2v4c0 2-1 2-3 2-1 0 0 0 0 1s-1 1-2 2 0 1-1 2c0 2 0 1-1 2l-2 2v3c0 1-1 0-1 0-1 0-2 0-2 1-1 1-2 1-3 3-2 1 0 0 0 1 1 1-1 1-1 2-1 0-1 1-2 2s-2-2-4-3l-1-2c1 0-1-2-1-2-1 0-1-1-1-1 0-1-1-1-1-1v-2l-1-1h-2l-1-2h-1c-1 1-1 1-1 2-1 0-2 1-2 1s1 1 0 1h-3c-1 0-1 1-1 2 0 0 0 2-1 2s-3 0-3-1c-1-1-2-3-3-3-1 1-2-1-2-2l-1-1s-1 0-1-1 0-2-1-3c0 0-1 0-1-1-1 0-1-1-2-1h-1c0 1-1 2-1 2l-1 1h-1l-3-7h-10s-1 2-2 2l-1-2v-4c-1 0-3-1-3-1-1 0-1 2-2 2 0 0-4-2-4-3s1-1-1-1c-1 0 0 1-2 1-2-1-2-1-3-1 0-1-1-2-2-2s-3-1-3-1c0-1-1-1-1-1 0-1 0-2-1-3l-2 1c-1 1-2 0-2-1s1-2 1-2c1 0 2-1 2-1v-7c-1-1-1-4-1-4v-1c0-1 1-1 1-1h-6l-2-1v-3s0-1-1-1l-1 2v1c-2 1-3 0-3 0v-2c0-1-1-4-1-4s0-1-1-1-2-2-2-2v-3s0-4 1-4l2-1h3c1-1 1-5 2-6 0-1 0-2 1-2s2 0 2-2c0-1 0-5-1-6s-1-2-1-3l1-1v-2c1 1 1 0 2 0 2 0 1-1 1-2v-1c-1-1 0-1 0-2 0 0 2-1 2-2v-4h4c1-1 0-5 0-5h2c0 1 1 1 1 1 1 0 1 0 2 1 0 2 1 1 2 1 2 0 3-1 4-2 1 0 1 1 2 2 0 1 0 1 1 2 1 0 1 1 2 2v2c0 1-1 1-2 3-1 1 1 0 2 1l1 1c1 0 1-1 2-1 1-1 0 1 1 1 0 0 1 1 2 1l1 2c1 0 2 6 2 6h1v2s2 1 2 2v1c0 1 2 1 2 1v2s0 1 1 1h3c1 0 1 0 1 1v1c0 1 1 1 1 1h1c0 1 1 1 2 1v2s0 1 1 1 9-1 9-1v1h2c0 1 1 0 2 1h4s0 1 1 2l2-1s0-1 1 0c0 0 0-2 1-2h2s3-1 3 0v2c1 0 2 1 2 1 1 0 2-1 2-1 1 0 1-1 2-1 1 1 2 1 2 1s1 0 2 1h2s3 0 4 1 2 1 3 1Z"
            onPress={stateMachine.bind(this, 27, "CHINA")}
        />
        <Text2
            x="750" y="355"  text-anchor="middle" stroke="green" fill="black" >{findTropas("CHINA")}
          </Text2>
        <Path
        //INDIA
          fill="#090"
          d="M701 335c0 1-1 3-2 4-2 1-5 1-5 1s-3-2-4-3-2 0-3 0c-2 0-2 3-2 4-1 1-2 1-3 1-1-1-3 0-3 0-1 0-1 2-1 2 0 1-2 3-3 4 0 1-3 2-3 1v3s0 1-1 8c0 3 1 1 2 3v2c0 1 1 3 2 4v2c0 1 1 2 2 3s1 3 0 4 1 1 1 3c1 1 2 5 2 6l2-2c1 0 3 0 3 1 1 1 0 3 1 4l2 1h2c1 0 1-1 1 1v2c1 1 3 1 3 1s2 0 1 1-2 1-2 2-1 1 0 1 1 0 1 1l1 1c1 1 0 1 2 1 1 1 2 0 2 0v-1s1-2 2 0c1 1 0 1 0 3s-1 4-1 5v6c0 2 2 1 2 2 0 2-1 2 0 3 1 0 2 2 2 3v2c0 1 0 2 1 3 1 0 2 0 2 2 0 1 1 3 1 3s1 1 1 2l1 1c0 1 1 0 2 5s2 2 3 6 2 5 3 5 2 0 2-1 0-1 1-1c1-1 1-1 1-2s-1-1-1-2c1 0 0-2 1-2 2 0 3-1 3-1l-1-1v-3c1-3 1-4 1-6 0-3-1-2 0-5s2-1 2-4c0-2 1-4 1-6 0-1 1 0 1-2 0-1-1-2 0-3s2-2 2-3v-3l1-2s2 0 1-1v-4c1-1 2-4 3-3l2 1 2-2v-2s0-2 1-2h3s-1-4 0-4 2 0 2-1 1-2 1-2c1 0 1-3 1-3h2s0-4 1-5 2-3 2-3l-3-7h-10s-1 2-2 2l-1-2v-4c-1 0-3-1-3-1-1 0-1 2-2 2 0 0-4-2-4-3s1-1-1-1c-1 0 0 1-2 1-2-1-2-1-3-1 0-1-1-2-2-2s-3-1-3-1c0-1-1-1-1-1 0-1 0-2-1-3l-2 1c-1 1-2 0-2-1s1-2 1-2c1 0 2-1 2-1v-7c-1-1-1-4-1-4v-1c0-1 1-1 1-1h-6l-2-1v-3s0-1-1-1l-1 2v1c-2 1-3 0-3 0Z"
            onPress={stateMachine.bind(this, 28, "INDIA")}
        />
        <Text2
            x="700" y="390"  text-anchor="middle" fill="none" >{findTropas("INDIA")}
          </Text2>
        <Path
        //IRKUTSK
          fill="#3f6"
          d="M807 271v1s-1 1-2 1c-1-1-2-1-2-2s-1-1-1-1-2 0-2-1c0 0 0-1-1-2v-2h-2v-1c-1-1-1-2-1-2l-1-1c-1 0-2 1-2 0v-4s-1 0-1-1c0 0 0-1-1-1s-1 0-2 1l-1 1h-4l-1-1h-1c0 1 1 1 0 2v1c-1 0-2 0-2 1l1 1v1c1 0 1 0 1 1s0 2-1 2l-1 1v1c0 1-1 1 0 2 0 0 0 1 1 1v2c0 1 0 1-1 2 0 0-1 1-1 2-1 0 0 1-1 0-1 0-1-1-1-1v-1c-1-1-1-2-1-2s-2-1-2 0c-1 0 0 1-1 1l-1 1c0 1-1 2-2 1h-3c-1 1-2 2-2 1-1 0-2 0-2-1h-5c-1 0-2-1-3-1s-3-1-4-1-1 0-2 1c0 0-1-1-1 0 0 0 0 1-1 1h-2c0-1-1-1-1-1s0-1-1 0h-1l-1-1-1-1-2 1h-1c-2 0-1 0-2-1-1 0 0-1-1-3-1-1-1 1-1 1s-1 0-2-2c0-2 1-1 1-3v-3c0-2 1-1 1-1v-4c0-3-1-1-2-3-1-1 0-1 0-2 1 0 1-1 2-2 1-2 1-1 3-2 2 0 1-2 3-3 2 0 1 0 2 1s2 0 3-1c2 0 2-1 4 0 2 0 1 0 2 1 0 2 1 2 3-1 2-2 0-8-1-11-1-4 3-11 3-11s5-2 6-2c1-1 1-1 2-3 0-2 0-5 2-5 1 0 1 2 1 2 0 1 1 0 3 1 1 0 0-1 0-2v-1c0-1 12 0 12 0v3s2 3 1 5c0 2-1 8 0 9 0 1 0 4 1 5s1 1 1 2c1 1 4 2 5 3 1 2 0 2 1 3 1 0 2 2 2 3s0 3 1 3c1-1 2-2 3-2 0 0 1-1 2 0h5s1 1 1 2 0 1 1 1c2 0 2 0 2 2 1 2 2 2 2 2v3s-1 1-1 2c1 2 1 3 1 4-1 0-2 2-2 3v5Z"
            onPress={stateMachine.bind(this, 29, "IRKUTSK")}
        />
        <Text2
            x="750" y="270"  text-anchor="middle" fill="none" >{findTropas("IRKUTSK")}
          </Text2>
        <Path
        //JAPON
          fill="#0f6"
          d="M829 335v-5c-1 0-1-1-2 0-1 0-3-1-3-1s0-1 2-2c2-2 3-2 3-2l-1-1s-2 0-1-1 1-2 2-3 3-6 4-8c2-2 4-2 4-2l2-5s-1-3 1-5c3-1 3 1 4-2s3-3 3-4 1-1 0-3c0-2-2-3-2-3v-4c0-2-1-4 1-4 1-1-2-4-2-4s1-1 0-2c-1 0-1-1-1-2v-3s1-2 2-2c0 0 1 0 1-1 0-2-1-5-1-5s-4-5-4-6c-1 0-1 0 0-1 0-1 4 4 6 4 3 1 5 0 5 0l2-1h5s2 0 2 2 3 2 2 3c-2 2-1 3-3 3-1 0-1-1-2-1 0 0-1 0-1 2s1 2 0 4c-1 1-1 2-2 2h-6c-1 1-2-1-2 1 0 1 0 2 1 2s1 0 1 1-2 2-1 2c1 1 2 0 2 1h3v1s1 0 2 1c1 0 2-1 2 0s1 2 1 2v1c1 1 1 2 1 3s-1 3-1 3-1 1-1 3c1 1 1 0 1 1 1 2 1 3 1 4s-1 1 1 2c1 1 1 2 1 2s1 0 1 1v3h-3l-1 1c0 2-1 2-1 2s0 2-1 2-1 0-2 1h-2c0 1 0 2-1 2 0 0-1-2-2 1 0 2 2 3 0 3-2 1-3 1-3 1s0 2-1 1c-1 0-2-1-2-2s-1-2-1-2l-2 2s0 1-2 1c-1 0-2-2-2 0 1 2 1 3 2 4 0 1 1 0 1 1-1 1 0 1-1 2s-2 1-3 1h-2c-1 0-2 7-2 7l-1 1h-1Z"
            onPress={stateMachine.bind(this, 30, "JAPON")}
        />
        <Text2
            x="860" y="310"  text-anchor="middle" fill="none" >{findTropas("JAPON")}
          </Text2>
        <Path
        //KAMCHATKA
          fill="#0c6"
          d="M818 289c1-1 1 0 2-2 0-2 0-2 1-3 0 0 2-3 2-4 0-2-1-2-1-3 1-2 1-2 1-4s0-2 1-4v-4c0-1-1-2-1-3v-6l-2-2v-1c-1-1-1-1-1-2s-1 1-1-3c1-3 1-4 1-4s-1-4-3-4-3 1-3-1-1-2-3-2c-1-1-2 0-2-1h-4c-2-1-2 0-2-1s0-2 1-5c2-2 2-3 2-4 1-2-1-1 1-3 3-2 2-3 5-3 2 0 3 0 4-1 2-1 1-2 3-1s2 2 3 1c2-1 2-2 3-2l3 2h1c1 0 2 2 3 0s0-2 0-3c-1 0-2 2-2-1 1-3 1-4 1-5-1-1-3-5 0-3 3 3 2 3 3 4 2 0 1 0 1 3 1 2 5 1 4 4 0 3 0 4-1 6 0 1-1 0-1 5s1 14 5 18c5 4 6 5 7 3 0-2 1-2 0-4 0-2-1-3 0-5 1-1 1-2 1-3s1-2 1-3c-1-1 0-3-1-4v-4c0-1-1-2-2-3 0-1-1-3-2-4 0-1 0-2 1-4 1-1-1-2 2-2s2 1 4 1c1-1 3 0 3-2 1-1 1-1 1-2 1-2 2-1 3-3 1-1-1-2 2-4 2-2 4-3 4-3 1-1 2-1 1-2s-1-2-2-3c-2-1-2-2-3-2s-2 0-1-1c1 0 2-1 3-1s1 1 2 0c2-1 2-1 3 0 1 0 1 0 1 1 1 2 0 1 2 2 2 2 4 2 4 2 1 0 0 1 2 0l2-2c1-2 2-2 1-4 0-1-1-2-1-3l-1-2s0-1-1-1h-3c0-1 0-2-1-2s-2-1-2 0c-1 1-2 2-2 1-1 0-2-1-2-1v-2l-2-2-2-1s-3-3-4-3-3 0-3-1 2-1-1-1c-3-1-4 0-5-2-1-1 1-2-2-2-2 0-3 1-5 0-3-1-3-2-4-1s0 1-1 2c-2 1-1 2-3 2s-2 1-3 0c-1 0-1-1-3-1h-2c-2 0-1 1-3 0l-4-2c-2-1-2-1-3-1s-5-1-6 0c0 0-1 2-1 3s1 3-1 3h-1c-1 0-1 0-1 1-1 0-1 0-1 1-1 1-1 2-2 2 0 0-2 0-2 1-1 0 0 0-1 3 0 3 0 7 1 8h4s1 1 1 2v3c0 1-1 1-1 2v3c-1 0-2 1-2 1h-3s0-1-1-1h-3c-1 0 0 1-1 0-1-2 0-3-1-4 0 0-4 0-5 1 0 2-2 3-2 3s-1-2-2 1-3 5-3 5 1 3 0 4l-3 3v3s2 3 1 5c0 2-1 8 0 9 0 1 0 4 1 5s1 1 1 2c1 1 4 2 5 3 1 2 0 2 1 3 1 0 2 2 2 3s0 3 1 3c1-1 2-2 3-2 0 0 1-1 2 0h5s1 1 1 2 0 1 1 1c2 0 2 0 2 2 1 2 2 2 2 2v3s-1 1-1 2c1 2 1 3 1 4-1 0-2 2-2 3v8c0 1-4 1-2 3s2 4 4 4 3 3 3 4c1 1 1 2 3 2 1 0 1 2 2 2h1Z"
            onPress={stateMachine.bind(this, 31, "KAMCHATKA")}
        />
        <Text2
            x="820" y="210"  text-anchor="middle" fill="none" >{findTropas("KAMCHATKA")}
          </Text2>
        <Path
        //ORIENTE MEDIO
          fill="#0f0"
          d="M652 343c0 1 1 1-1 1l-2 2s1 1-2 1c-3-1-3-1-4-2-2 0-1 1-3 0-1-1-1-1-1-2-1-1-3-2-3-2s-1 0-1 1 2 1-1 1h-1c-1 0-2 0-2 1-1 0-1 0-2 1h-2c-1 0-1 1-1 1h-4s0 2-1 1c-2-1-2-1-2-2 0 0 0-1 1-1 0 0-1-2-3-1-1 0-3 0-3 1 0 0-1 1-2 1 0 1-2 1-3 0 0-1-1-2-4-3-2-1-4-2-5-1s0 1-2 1c-2-1-4-1-4-1-1 0-2 0-2 1 0 0 0 1-1 1s-2 1-2 1c-1 0-1 1-3 1s-4 0-5-1c-1 0-2-1-2-2l-1-1h-2l-1 1c-1 1-1 1-1 2-1 0-1 0-2 1v1c-1 1-1 0-1 1-1 1 0 1 0 2s1 1 0 2c0 0 1 2 1 3 1 1 2 1 1 2-1 0-2 0-2 1s2 4 3 5 0 4 1 5c2 1 3 2 4 2s2-2 3-1c0 2-1 4 0 4s3 1 3 1c0-1-1-3 0-3 1-1 0-3 3-2 2 1 2 2 4 2h4c1 0 2 1 2 0 1-1 1-2 2-2s3-1 4 1c0 1-1 2-1 3s1 1 1 7 1 9 0 10c-1 0-2 2-2 3 1 1 2 4 2 6 1 2 1 3 1 4 1 1-1 1 1 3 1 1 4 2 4 4 0 1 2 1 3 3 1 1 2 4 2 6 1 2 2-1 3 2 0 3 3 2 3 4 1 2 3 4 4 5 1 0 4 1 4 3-1 1 2 3 2 4v4s0 1 1 2 1 1 2 3c0 1 1 1 1 1s10-1 13-2 7-3 7-4 0 0 2-1c1 0 2-2 2-2l2-2s0-2 1-1c1 0 3 1 3 0s-1 0 2-5 4-7 3-8c0-1 0-1 1-2 1 0 2-3 2-3l-1-2 1-2s1-4 0-5c-1 0-1-1-1-2 0-2-1-3-1-3s0 1-2 0c-1 0-3-2-3-2s-2 1-2 0 1-3 0-2c-1 0-2 0-3 1 0 1 1 2-2 2s-4 1-5 0c-1-2-1-2-1-3 0-2 1-1-1-2-1-1-2-1-2-2v-1s-2 0-2-1c-1-1 1-2-1-4l-2-2c0-1-1-2-1-2s-1 0-1-1c1-1 1-1 2-1 2 0 2-1 3-1 1-1 0-1 2-1 1-1 1-2 1 0 1 1 1 2 1 4v4c1 1 1 2 1 2 0 1 1 2 1 2h1c1 0 1-1 1 0s0 1 1 1c0 1 0 1 1 1s1-1 2-1 1 1 1 1 2 0 2-1-1-2 0-3c0 0 1-2 2 0 1 3 0 3 1 4 0 1 1 1 2 1s1 0 2-1 2-1 2-1-1-2 0-2c2-1 3-2 3-2l1-1 1-1h3s-1-5-2-6c0-2-2-2-1-3s1-3 0-4-2-2-2-3v-2c-1-1-2-3-2-4v-2c-1-2-2 0-2-3 1-7 1-8 1-8v-3s-1 0-1-1c0 0-1-2-2-2h-2c-1 0-2 0-2-1v-2c-1 0-1 0-2-1 0-1-1-1-1-1-1 0-2 0-2-1h-2c-1 0-2 2-2 2-1 0-2 0-3-1h-1v2Z"
            onPress={stateMachine.bind(this, 32, "ORIENTE MEDIO")}
        />
        <Text2
            x="620" y="400"  text-anchor="middle" fill="none" >{findTropas("ORIENTE MEDIO")}
          </Text2>
        <Path
        //MONGOLIA
          fill="#096"
          d="m737 273 1 1c0 1 1 2 0 4-1 1-2 3-1 5s3 2 3 4c0 1-1 0-1 2v4c0 1-1 2-1 2l1 2c1 0 2 6 2 6h1v2s2 1 2 2v1c0 1 2 1 2 1v2s0 1 1 1h3c1 0 1 0 1 1v1c0 1 1 1 1 1h1c0 1 1 1 2 1v2s0 1 1 1 9-1 9-1v1h2c0 1 1 0 2 1h4s0 1 1 2l2-1s0-1 1 0c0 0 0-2 1-2h2s3-1 3 0v2c1 0 2 1 2 1 1 0 2-1 2-1 1 0 1-1 2-1 1 1 2 1 2 1s1 0 2 1h2s3 0 4 1c0 0 2 1 3 1 1-1 1 0 2-1 1-2 0-1 2-3 1-2 3-2 1-2-3 0-2 0-3-1-1 0 0-1-2-1-1 1-1 1-2 0 0 0 1-1-1-1s-1 1-2 0c-2-1-2 0-2-1s0-2 1-2c1-1 1 0 2-1 0 0 1 0 1-1s1-1 1-2c1-1 1-3 1-3 1 0 1 0 2 2 0 2-1 2 1 2 1 1 2 1 3 1 1-1 0 0 1 1l2 2c1 0 1 2 1 2h4s-1-1 0 1 1 2 1 4-1 3 0 3c1 1 2 1 2 1s3-2 3-4c0-1 1-1 1-2s-1 0 0-1v-3s0-1-1-1l-1-1c0-2 1-2 0-2s-2-1-2-2 0-1-1-1l-1-1c-2-1-2-1-3-2-1 0-1-1-1-1 0-1 0-2 1-2 0-1 1 1 1-2 0-2-1-2 0-4 1-3 1-3 2-4 0-1 0 0 2-2h-1c-1 0-1-2-2-2-2 0-2-1-3-2 0-1-1-4-3-4s-2-2-4-4 2-2 2-3v-2s-1 1-2 1c-1-1-2-1-2-2s-1-1-1-1-2 0-2-1c0 0 0-1-1-2v-2h-2v-1c-1-1-1-2-1-2l-1-1c-1 0-2 1-2 0v-4s-1 0-1-1c0 0 0-1-1-1s-1 0-2 1l-1 1h-4l-1-1h-1c0 1 1 1 0 2v1c-1 0-2 0-2 1l1 1v1c1 0 1 0 1 1s0 2-1 2l-1 1v1c0 1-1 1 0 2 0 0 0 1 1 1v2c0 1 0 1-1 2 0 0-1 1-1 2-1 0 0 1-1 0-1 0-1-1-1-1v-1c-1-1-1-2-1-2s-2-1-2 0c-1 0 0 1-1 1l-1 1c0 1-1 2-2 1h-3c-1 1-2 2-2 1-1 0-2 0-2-1h-5c-1 0-2-1-3-1s-3-1-4-1-1 0-2 1c0 0-1-1-1 0 0 0 0 1-1 1h-2c0-1-1-1-1-1s0-1-1 0h-1l-1-1-1-1-2 1h-1Z"
            onPress={stateMachine.bind(this, 33, "MONGOLIA")}
        />
        <Text2
            x="755" y="310"  text-anchor="middle" fill="none" >{findTropas("MONGOLIA")}
          </Text2>
        <Path
        //SUDESTE ASIATICO
          fill="#3c6"
          d="M788 388c-2-1 0-2-3-3-4 0-4 9-3 10 0 1 1 2 3 2 2-1 2 0 2 2 1 2 0 4 0 4s1 0 2-1c1 0 3 1 4 4 1 4 1 4 2 6s1 3 2 6c0 2-1 6-1 7 0 2-4 6-4 7s-3 3-3 4-2-1-2-1-1-3-1-4l-2-2 1-2s-2-1-3-1-1-1-1-1l-2-1s0-1-1-1c-2 0-1 0-2 1 0 1 0 1-2 2-1 2 1 1 2 2 1 2 1 1 1 3s0 3 2 8c1 4 1 1 1 1s1 1 1 2c0 2-1 2-1 2h-4c-1-1 0-1-3-4-2-3-2-4-3-4-1-1 0-2 0-3 0-2 0-3-1-4s-1-2-1-4c-1-1 0-3 0-4 0-2-1-2-1-4l-1-2s-4-3-5-2-2-2-2-2-3 1-4 0c0-2-6-8-7-10 0-2 0-4-1-4s-2-3-2-3l-1-2c-1-3 0-4 0-4 1 0 2 0 2-1s1-2 1-2c1 0 1-3 1-3h2s0-4 1-5 2-3 2-3h1l1-1s1-1 1-2h1c1 0 1 1 2 1 0 1 1 1 1 1 1 1 1 2 1 3s1 1 1 1l1 1c0 1 1 3 2 2 1 0 2 2 3 3 0 1 2 1 3 1s1-2 1-2c0-1 0-2 1-2h3c1 0 0-1 0-1s1-1 2-1c0-1 0-1 1-2h1l1 2h2l1 1v2s1 0 1 1c0 0 0 1 1 1 0 0 2 2 1 2l1 3Z"
            onPress={stateMachine.bind(this, 34, "SUDESTE ASIATICO")}
        />
        <Text2
            x="745" y="415"  text-anchor="middle" fill="none" >{findTropas("SUDESTE ASIATICO")}
          </Text2>
        <Path
        //SIBERIA
          fill="#0c0"
          d="M683 193c1 2 2 1 3 0s0 0 0-2c0-1 0-1-1-2s0 0-2 0h-5c-2 0-1-1-1-2v-2l-2-2v-4c0-1 0 0-1-1v-1l1-1h2l1 1h2l3 3c2 2 1 0 2 0h1s-2-1-2-2c0 0 1-1 1-2 0 0 0-2-1-2 0-1-1-1-1-2-1 0-1-2-1-2s-1 0 0-3c1-2 1 1 1 1h1l1 2 2-1c1 0 2 2 2 2h3c1 0 2-1 2-2s-2 0-2 0l-3-1s-4-1-5-2 0-2 0-2l2-2s1-1 2-1h3s1-3 1-4c0-2 3-1 3-1s1 0 2-1c0 0 2-2 5-4 4-2 4-1 5-1h4c0-1 2-2 2-2 1 0 3-1 3-1 0 1 1 2 1 3 0 0 1-1 3-2s1-1 2-2 1-1 3-1c1 1 0 2 0 3 1 1 2 2 4 3 1 1 4-4 4-1 1 2 4 3 4 4l-3 3-2 2v2c0 1 0 0-2 1l-2 2c0 1-1 1-2 1s0 1-1 2c0 1 1 1 1 1s1-1 2-1c0-1 3-2 3-2 1-1 3-2 4-3 1-2 3-1 4-1 1-1 2 0 2 0s1 0 2-1c1 0 4-1 5-1 0 0 2 0 3 1l3 3 2-1v3c0 1 0 2 1 3s1 1 2 1v5c0 1-1 1-1 1-1 1-1 2-1 3 0 2-1 1-1 3-1 1 0 1 0 2 1 1 1 2 1 3 0 2 0 1-1 1s-1 1-3 1c-1 0-2 1-3 0 0-1-1-1-3-1-3 0-1 1-1 2s-1 1-3 1c-1 1-1 1-1 2 0 2 2 3 3 3l2 2s1 0 3 1c1 2 0 2-1 3s0 4 1 5c1 0 1 1 2 4 0 3 1 3 1 3s1 1 1 4 1 6 1 6-4 7-3 11c1 3 3 9 1 11-2 3-3 3-3 1-1-1 0-1-2-1-2-1-2 0-4 0-1 1-2 2-3 1s0-1-2-1c-2 1-1 3-3 3-2 1-2 0-3 2-1 1-1 2-2 2 0 1-1 1 0 2 1 2 2 0 2 3v4s-1-1-1 1v3c0 2-1 1-1 3 1 2 2 2 2 2s0-2 1-1c1 2 0 3 1 3 1 1 0 1 2 1l1 1c0 1 1 2 0 4-1 1-2 3-1 5s3 2 3 4c0 1-1 0-1 2v4s-1 1-1 2c-1 0-2-1-2-1-1 0 0-2-1-1-1 0-1 1-2 1l-1-1c-1-1-3 0-2-1 1-2 2-2 2-3v-2c-1-1-1-2-2-2-1-1-1-1-1-2-1-1-1-2-2-2-1 1-2 2-4 2-1 0-2 1-2-1-1-1-1-1-2-1 0 0-1 0-1-1 1-1 1 0 1-2 0-1 0-4-1-5s-1-1-1-2v-1c-1 0-2-2-3-3 0-1-1-1-1-1-1 0-2-2-2-2s-4 0-3-1v-2c0-1 1-3 0-4 0-1-1-2-2-2s-2 0-2 1c-1 1-2 1-2 1s-1 0-1-1c0 0 0-3 1-4 1-2 1 0 1 0 1-1 1-3 1-3 0-1 0-2 1-3s2-1 2-2c1-1 1-1 1-2-1 0-2-1-2-2s1-1 0-2-1-1-1-2c0 0 1 0 0-1-2-1-2 0-2-2v-3c1-1 0-3 0-4-1 0-1-1-2-1v-2c-1 0-2-1-2-2l-1-1c0-1-1-2-2-2l-2-1c-1-1-1-2 0-2v-3c-1-1-1-2-1-3 0-2 0-2-1-2h-2v-3l-2-4-1-1c-1-1-2-1-2-1-1-1-1-1-1-2-1-1-1-3-1-3Z"
            onPress={stateMachine.bind(this, 35, "SIBERIA")}
        />
        <Text2
            x="710" y="220"  text-anchor="middle" fill="none" >{findTropas("SIBERIA")}
          </Text2>
        <Path
        //URAL
          fill="#390"
          d="M665 265c1 0 0-1 0-3v-3c0-1-1-2-1-3 0 0 2-1 2-3 1-1 0-2 0-3s-2-1-2-1l-3-2-1-1v-3c0-2 1-2 2-3v-4c0-1-1-1-1-1v-9c0-1-1-3-2-4 0-1 1-3 1-3s-1-2-1-3 1-4 1-4l2-5 1-2s0-4 1-4v-4s-1-7-2-7l1-3-1-1v-2l-3-1 1-3s1-2 2-2c0 0-2-2-2-3v-1c1 0 1-1 1-2l-1-1 1-3 3 1 1 1c1 1 2 0 2 0 1 0 0 1 1 2 1 2 1 0 2 0 1 1 1 2 1 2 0 1-1 2-1 3l-2 2c-1 1 2 2 2 2s0 1 1 2c0 1 0 0 1 1 1 0 0 1 0 2 0 0 1 1 1 2 1 1 0 1 1 3 1 1 2-1 2-1s0 1 1 2c0 1 2 1 2 1l2-2 1-1c1 0 0 0 1 2s0 3 1 4c0 1 0 1 1 2 0 0 1 0 2 1l1 1 2 4v3h2c1 0 1 0 1 2 0 1 0 2 1 3v3c-1 0-1 1 0 2l2 1c1 0 2 1 2 2l1 1c0 1 1 2 2 2v2c1 0 1 1 2 1 0 1 1 3 0 4v3c0 2 0 1 2 2 1 1 0 1 0 1 0 1 0 1 1 2s0 1 0 2 1 2 2 2c0 1 0 1-1 2 0 1-1 1-2 2s-1 2-1 3c0 0 0 2-1 3 0 0 0-2-1 0-1 1-1 4-1 4 0 1 1 1 1 1s1 0 2-1c0-1 1-1 2-1s2 1 2 2c1 1 0 3 0 4v2c-1 1 3 1 3 1s1 2 2 2c0 0 1 0 1 1 1 1 2 3 3 3v1c0 1 0 1 1 2s1 4 1 5c0 2 0 1-1 2h-2s1 4 0 5h-4v4c0 1-2 2-2 2 0 1-1 1 0 2v1c0 1 1 2-1 2-1 0-1 1-2 0-1 0-1-2-2-2l-1-1v-3l-2-1h-3c-1 0-3 0-4-1 0 0 0-1-1 0h-3l-2-1s-1 0-1-1c-1 0-1-2-2-2 0-1-1-2-1-2-1 0-1-1-2-2 0 0-1 0-2-1 0 0-1 0-1-1 0 0 0-1-1-1h-1s0-2-1-2c0-1-1-2-2-2s-1 0-2-1v-1s-2-1-2-2l-1-1-1-2h-2l-2-1Z"
            onPress={stateMachine.bind(this, 36, "URAL")}
        />
        <Text2
            x="670" y="249"  text-anchor="middle" fill="none" >{findTropas("URAL")}
          </Text2>
        <Path
        //YAKUTSK
          fill="#396"
          d="M810 170c-1-1 0-1-1-2-2-1-3-1-4-1-1-1-1-1-1-2 1-2 3-2 0-2-2-1-2-2-3-2-2 0-2 0-3 1h-1v1c-1 0-1 0-2-1s0-1-1-1h-2c-2 1-2 1-4 1-1 0-3 2-3 2h-1c-1 0 0-1-2 1-2 1-1 1-3 1-1 0 0-1-2 0s-2 0-2 1-1 2-1 2v-2c-1-1-1-1-1-2s-5-2-6-4c-1-1-1-1-1-3 0-1-3-2-4-2 0 0-1 2-2 2-1 1-1 2-2 3-1 0-2 1-2 1v3c0 1 0 2 1 3s1 1 2 1v5c0 1-1 1-1 1-1 1-1 2-1 3 0 2-1 1-1 3-1 1 0 1 0 2 1 1 1 2 1 3 0 2 0 1-1 1s-1 1-3 1c-1 0-2 1-3 0 0-1-1-1-3-1-3 0-1 1-1 2s-1 1-3 1c-1 1-1 1-1 2 0 2 2 3 3 3l2 2s1 0 3 1c1 2 0 2-1 3s0 4 1 5c1 0 1 1 2 4 0 3 1 3 1 3s1 1 1 4 1 6 1 6 5-2 6-2c1-1 1-1 2-3 0-2 0-5 2-5 1 0 1 2 1 2 0 1 1 0 3 1 1 0 0-1 0-2v-1c0-1 12 0 12 0l3-3c1-1 0-4 0-4s2-2 3-5 2-1 2-1 2-1 2-3c1-1 5-1 5-1 1 1 0 2 1 4 1 1 0 0 1 0h3c1 0 1 1 1 1h3s1-1 2-1v-3c0-1 1-1 1-2v-3c0-1-1-2-1-2h-4c-1-1-1-5-1-8 1-3 0-3 1-3 0-1 2-1 2-1 1 0 1-1 2-2 0-1 0-1 1-1 0-1 1-1 2-1 2 0 1-2 1-3l-1-1Z"
            onPress={stateMachine.bind(this, 37, "YAKUTSK")}
        />
        <Text2
            x="760" y="205"  text-anchor="middle" fill="none" >{findTropas("YAKUTSK")}
          </Text2>
        <Path
        //AUSTRALIA ORIENTAL
          fill="#93f"
          d="M825 511v-1c1-2 0-4 1-5 1-2 1-2 3-2l2-2c0-1 1-1 2-1s2 1 3 0 0-2 1-1h2c1 1 2 1 5 1 2-1 3-2 3-1 0 2 0 2 1 2s1 0 0 1c0 1 0 0-1 2-2 2-3 2-3 4v2s0 2 1 2 1 0 3-1c2 0 3 0 3 2 0 1 1 4 2 4 1 1 1 1 3 1 2-1 3 0 3-1v-4c0-1-2 1 1-2 2-4 2-2 2-6-1-3-2-3-1-6l1-2s2 0 2 2c0 3 1 5 1 6s1 5 1 5 1 1 2 1c0-1 1-1 1-2s1-3 1-2 1 1 1 2v3c1 2 2 3 2 3v9c0 2 0 2 1 2l1 1c1 0 1-1 2 0 0 1 0 1 2 1 1 1 2 0 2 0s1 1 1 2-1 2 0 3c0 2 0 2 1 2h1s1 1 1 3v2l1 1s1 1 1 2c1 1 2 1 2 1v2l1 1c1 2 1 2 1 3s1 2 1 3v4c-1 2 0-1-1 2v5c0 1 0 1-1 3v3s-1 2-2 2-3-1-3 0 0 2 1 2 1-1 1 1c0 1 0 1-1 2s-1 1-2 1c-2 1-1 0-2 2-1 3 0 3-1 4-1 0-1 0-1 1-1 2-1 2-1 3v2s-2 1-2 3c0 1 1 1 1 2-1 1 0 1-2 1h-2l-3 1s0-1-1-1c-1 1-1 1-1 2-1 1-1 1-2 1-1 1 0 1-1 2 0 1 0 1-1 1-1-1-2 0-2-1 0-2 0-2-2-2-1-1-2-1-2-1v1c-1 1 0 2-2 2-1 1-1 1-2 0v-7c1-1 0-1-1-2 0-1 1-43 1-43 0-1-30 0-30 0v-38Z"
            onPress={stateMachine.bind(this, 38, "AUSTRALIA ORIENTAL")}
        />
        <Text2
            x="860" y="580"  text-anchor="middle" fill="none" >{findTropas("AUSTRALIA ORIENTAL")}
          </Text2>
        <Path
        //NUEVA GUINEA
          fill="#c3f"
          d="M825 457s1-3 2-3c1-1 0-1 0-3 0-1-1-2 0-2 2-1 2 0 4-1 1 0 3-1 3-1l2 2h3c2 0 3 1 4 3s0 3 3 4c3 2 5 3 7 3 1 1 3 2 2 3 0 2 2 2 0 3 0 0 5 2 6 4 1 1 2 2 1 3-2 1-3 0-3 1s1 2 1 3c1 1 2 2 2 4 0 1 0 2 1 3 2 1 2 1 2 2v2s-1 1-3 1-3-1-3-1c-1 0-3-1-3-1s-1-4-5-5c-3-1-3-2-3-1s1 2 0 3h-3c-1 0 3 2-2 2-4 0-5-2-7-1s-7-4-7-4-3 1-3-1c0-1-1-1 0-3 1-1 1-1 1-2v-4c0-1 1-2 0-2-1-1-2-1-2-2-1-1-1-2-1-2-1 0 0 1-2 1-1 0-2 1-4-1-1-2-1-2-3-2-3 0-8 4-4 0 4-3 5-3 5-3s-4 0-4-2c0-1-1-3-2-4-1 0-2 0-1-2 0-1 1-5 4-5 4 0 5 1 6 2 1 0 3-1 3 0v5s1 1 2 3l1 1Z"
            onPress={stateMachine.bind(this, 39, "NUEVA GUINEA")}
        />
        <Text2
            x="850" y="470"  text-anchor="middle" fill="none" >{findTropas("NUEVA GUINEA")}
          </Text2>
        <Path
        //INDONESIA
          fill="#63c"
          d="M771 513c1 1 0 2 2 2s3-1 4-1c2 1 1 1 2 1 2 0 3-1 4-1h3s2 1 3 1h5c0 1 2 2 3 1s1-1 1-2 0-2-1-2c0-1 0-1-2-1s-3-1-3-1c-1 0-2-1-3-1 0-1-3-2-4-2h-5c-2 0-2 0-4 1-1 1-2 1-3 2s-1 0-1 1l-1 2Zm23-8c1-2 0-2 0-3 0-2 1-1 1-2 1-1 1-3 2-1s1 3 2 4 2 2 3 1 3-2 2-4c-2-1-2 0-2-3-1-3-1-4-2-4 0 0-1 1-1-1 0-1-1-3 0-4 2 0 3 1 4 0 1-2 2-3 0-3h-3c-1 0-2 0-2-1s-1-1 1-1h3c2 0 3-1 4-2 0 0 1-2 2-3l1-1c0-1-1-1-1-2h-3c0 1-1 2-2 3h-6c-1 1-2 1-2 2-1 0-2 1-2 2v4s-1 2-1 3c-1 0 0 2-1 3v2c0 1-1 1 0 2 0 1 1 1 0 2 0 1-1 1 0 2 0 1 1 1 1 2v3c0 1 2 0 2 0Zm-10-7s-1-1 1-3c3-2 3-2 3-4s0-2-1-3-2-2-1-3c1-2 1-2 3-3 1 0 3-2 3-3v-3c0-1-1-3-2-4v-4c0-1 1-1 2-2 2-1 2-1 2-3s0-4-1-5c-1 0-1 0-2-1-2 0-2-1-4-2-2-2-3-2-4-1 0 1 1-2 0 2-1 3-1 3-1 4-1 1-3 1-3 2 0 2 1 2-1 5-2 2-6 6-8 6-3 1-5 1-5 2s1 2 1 3-2 2-2 3c1 0 1 0 2 1v4l3 3s-2 3-1 3l2 2c1 2 2 3 4 3 1 0 2 1 3 1 1 1 2 0 3 0s4 1 4 0Zm-24-17 1-1v6c1 0 0 1 0 2s1 3 1 3l1 1 2 1v1c1 1 2 1 2 1v2c0 1-1 2 0 2h3c1 0 0 1 1 2 0 1 1 1 1 2v3c-1 1 0 1-1 2s-2 1-2 1c-1 0-1 0-2 1 0 1 2 2 0 2-3-1-3 0-3-1-1-1 1-2-1-3-2 0 0 2-3-1-3-4-3-1-4-4 0-4-1-4-3-7-1-2-2-4-3-4s-2 1-3-1v-2c0-2 0-2-1-4-1-1-1-1-2-3 0-2 0-1-2-4s-3-3-5-5c-2-1-2-1-2-3s-1-4 0-5c1 0 1-1 3 0 1 1 1 2 2 2h2c1 0 1-1 2 1 1 1 2 1 2 3l2 2c0 1 1 1 1 1 1-1 2-2 2-1s0 1 1 1c0 1 1-1 1 1 0 3-1 4 0 3l2-2 1 1c0 1 0 3 1 3 1 1 2 1 2 1h1Z"
            onPress={stateMachine.bind(this, 40, "INDONESIA")}>
        </Path>
        <Text2
            x="755" y="470"  text-anchor="middle" fill="none" >{findTropas("INDONESIA")}
        </Text2>

        <Path
        //AUSTRALIA OCCIDENTAL
          fill="#c3c"
          d="M855 601v-7c1-1 0-1-1-2 0-1 1-43 1-43 0-1-30 0-30 0v-38l-3-1-2-2c-1 0-2 2-2 3-1 0-3 1-3 1s-1 2-1 3c0 2-2 0-4 1s0 1-1 3c0 1 0 0-2 0-1 0 0 1-2 2-1 1-1 0-2 2-2 1-1 1-1 3-1 1-1 0-3 1-1 1-2 3-3 4s-2 0-4 0h-3c-1 0-1 1-2 2s-1 2-3 3c-1 1 0 0-2 1-2 0-1 0-3 1s0 2-1 3c0 1 0 1-1 3 0 1 0 1 1 3 0 1 2 0 2 0s-1 2 0 3c0 1-1 0-2 0-2 0-1 0-1 2v1l-1 1c-1 1 0 1 0 2 0 2 1 2 1 3 1 2 1 1 2 3s0 2 0 4 0 1 1 4c0 2 1 1 1 1l2 2s0 1 1 2c0 2-1 2-1 3v3c0 2-1 1-2 2s0 1-1 2c0 2 0 1 1 2s2 1 3 2c2 3 5 2 8 0 2-1 1-1 2-1 1-1 1-1 2-1l2-2c1-1 0 0 2-1 1 0 1-1 3-2h4c2 0 1 0 1 1 1 1 2 1 2 1 1 0 2 0 3-1 1 0 0-1 0-2v-2c1-1 2-2 3-2s3 0 3-1c1-1 1 0 3 0l2-2c1-1 1-1 3-1h3c2 0 2 1 3 1s2 1 3 2c1 0 0 0 0 2 0 1 0 1 2 4 1 2 2 2 2 2s1-1 2-3 1 0 3-1c1-1 0-1 1-3 0-3 1-1 2-1s0 2 0 4l-2 2-2 2c-1 2-1 1-1 3 1 1 2-1 3-2s1-1 2-1v4c0 1 0 1 1 1 1 1 1 2 0 3v3c1 1 2 3 3 4s1 0 1 1c1 0 1 1 2 1Z"
            onPress={stateMachine.bind(this, 1, "AUSTRALIA OCCIDENTAL")}
        />
        <Text2
            x="790" y="550"  text-anchor="middle" fill="none" >{findTropas("AUSTRALIA OCCIDENTAL")}
        </Text2>
      </G>
    </Defs>
    <Circle r={99999} fill="#fff" />
    <G
      strokeLinecap="round"
      strokeLinejoin="round"
      fontFamily="Helvetica,Arial,sans-serif"
      fontSize={18}
      letterSpacing={-1}
      textAnchor="middle"
      transform="scale(1 .85)"
    >
      <Use xlinkHref="#a" stroke="#9ff" strokeWidth={15} />
      <Use xlinkHref="#a" stroke="#fff" strokeWidth={14} />
      <Use xlinkHref="#a" stroke="#9ef" strokeWidth={10} />
      <Use xlinkHref="#a" stroke="#fff" strokeWidth={9} />
      <Use xlinkHref="#a" stroke="#6cf" strokeWidth={6} />
      <Use xlinkHref="#a" stroke="#fff" strokeWidth={5} />
      <Use xlinkHref="#a" stroke="#69f" strokeWidth={3} />
      <Use xlinkHref="#a" stroke="#fff" strokeWidth={2} />
      <Use xlinkHref="#a" stroke="#000" filter="url(#b)" />
      <Path
        fill="none"
        stroke="#ccc"
        strokeWidth={4}
        d="M225 175q0-35 40-35h535q40 0 40 30m-480 20 25-5-5 35m5-35-45 55m120-40 15 15m11 53 34-23-25-10Zl43 4-9-27m-23 55 5 5m-4 68v9m40-7 22-5v20m-110 50h25m175 5v10m-35 90h20l-10-50m165-35h28v48Zv-25m28 25 22 40m-18-220 13 30h-15"
        filter="url(#b)"
      />
      <G filter="url(#c)" />
      <Use xlinkHref="#d" strokeOpacity={0} />
      <Text2 y=".7ex" transform="matrix(.8 0 0 .9 656 451)">
        <TSpan fontWeight="bold">{"*"}</TSpan>
      </Text2>
    </G>
  </Svg>
  )

    // Atributos generales
    let nombrePartida = '';
    let ganador = null;
    let turno= 0;
    const [cartas, setCartas] = useState(null);
    let descartes= [];
    //let mapa = [];
    let colores = ['verde', 'rojo', 'azul', 'amarillo', 'rosa', 'morado'];
    const [turnoJugador, setTurnoJugador] = useState('');
    let numJugadores = 3; // stub
    //let fase = 0; // Colocar- -> 0; Atacar -> 1; Maniobrar -> 2; Robar -> 3; Fin -> 4;
    // Atributos especfícios (míos, del jugador que juega en este cliente)
    const [numTropas, setNumTropas] = useState(1000);
    //let numTropas = 1000;
    const [territoriosTropas, setterritoriosTropas] = useState([{terrainId: '', numTropas: 0, user: ''}]);
    let territoriosTropasAux = [{terrainId: '', numTropas: 0, user: ''}]; // stub
    let tropas = [{terrainId: '', numTropas: 0, user: ''}];
    let ocupado = false;

    const [dialogBool, setDialogBool] = useState(false);
    const [seguir, setSeguir] = useState(false);
    const[dialog, setDialog] = useState(null);
    const [fase, setFase] = useState(0);// Colocar- -> 0; Atacar -> 1; Maniobrar -> 2; Robar -> 3; Fin -> 4;
    //let seguir = false;
    useEffect(() => {
      //console.log(dialog);
      switch(dialogState.type){
        case 'colocar':
          //setDialog(null);
          setDialogState({type: null, visible: dialogState.visible, title: dialogState.title})
          setDialogBool(false);
          //setSeguir(true);

          colocarTropasCorrectas();
          break;
        case 'seleccionar':
          setDialogState({type: null, visible: dialogState.visible, title: dialogState.title})
          setDialogBool(false);
          //setSeguir(true);
          console.log('seleccionar');
          seleccionarTropasCorrectas();
        break;
      }
    }, [dialogBool]);

    let colorMap =  {}; // no parece necesario
    let text= '';
    let tropasPuestas = 0;
    let recolocacion = false;

    const [textoFase, setTextoFase] = useState('Falta implementar el cambiar este texto(FASE)');
    /*
    // FASES PARTIDA
    const Colocar = 0;
    const Atacar = 1;
    const Maniobrar = 2;
    const Robar = 3;
    const Fin = 4; // No se usa
    */
    let eventoCancelado = false;
    // Ataque
    const [ataqueTropas, setAtaqueTropas] = useState(0);
    const [ataqueOrigen, setAtaqueOrigen] = useState('');
    const [ataqueDestino, setAtaqueDestino] = useState('');
    let avatarAMostrar = '';



  useEffect(() => {
    if(turnoJugador === whoami){
      switch(fase){
        case 0:
          console.log('Fase colocación', whoami, turnoJugador);
          setTextoFase('Fase colocación: Coloca una tropa en un país libre');
          console.log(thisPartida.auxColocar)
          setNumTropas(thisPartida.auxColocar || 0 );
          console.log(numTropas)
          break;
        case 1:
          setTextoFase('Fase ataque: Mueve las tropas de un país tuyo a uno enemigo contiguo');
          break;
        case 2:
          setTextoFase('Fase maniobra: Mueve las tropas de un país tuyo a otro tuyo');
          break;
        case 3:
          setTextoFase('Fase robo: Roba una carta');
          break;
      }
    } else {
      setTextoFase('Espera tu turno');
      setNumTropas(0);
    }
  }, [fase, turnoJugador]);


  const  updateFase = async () => {
    /*if(this.paused){
      this.toastr.error('La partida está pausada');
      return;
    }*/
    if(turnoJugador === whoami){
      const response = await axios.put(IP+ "/partida/siguienteFase", {idPartida: thisPartida._id}, { headers: { 'Authorization': token } });
      console.log(response);
      if(response.status === 200){
        let auxThisPartida = thisPartida;
            // This will be executed when the HTTP request is successful
            auxThisPartida.fase = response.data.fase; // cojo la fase 
            if(auxThisPartida.turno !== response.data.turno){ // si ha cambiado el turno, lo cambio
              auxThisPartida.turno = response.data.turno;
              //console.log(auxThisPartida.jugadores.length);
              setTurnoJugador(auxThisPartida.jugadores[(auxThisPartida.turno) % auxThisPartida.jugadores.length].usuario);
              // y además aviso 
              socket.emit('actualizarEstado', auxThisPartida._id);
            }
            if(auxThisPartida.fase !== undefined && auxThisPartida.fase !== null){
              setFase(auxThisPartida.fase);
            }
            //eventoCancelado = true;
      } 
      else{
        // This will be executed when the HTTP request fails
        console.log('Error al actualizar la fase');
      }
  }
  else{
    //this.toastr.error('No es tu turno');
  }
  }

  //maquina de estados de la partida
  const stateMachine = async (path , territoriname , e) =>   {
    const targetId = path;
    console.log(`Clic en la región con ID: ${targetId}`);
    console.log(`Clic en la región : ${territoriname}`);
    if(recolocacion) return;
    if (turnoJugador !== whoami) {
      Alert.alert('No es tu turno');
      console.log('No es tu turno');
      return;
    } 
    if(ocupado){ console.log("espere"); return};
    switch(fase){
      case 0: // colocación
        if (turnoJugador === whoami && !ocupado) {
          tropasPuestas=0;
          eventoCancelado = false;
          colocarTropas(territoriname, whoami, false, false);
          //La emision al socket se hace en la funcion anterior
        } else {
          if(!this.ocupado) Alert.alert('No es tu turno');
        }
        break;
      case 1: // ataque
        // aviso de nuevo click y relleno el territorio en el q se ha pulsado
        setNewClicked(true);
        setTerritorioName(territoriname);
        
        break
      /*case 2: // maniobra -> reutilizo las variables de ataque jeje
        if (ataqueTropas === 0) {
          setAtaqueTropas(0)
          setAtaqueDestino('')
          setAtaqueOrigen('')
          //colocarTropas(e, svgDoc, 50, 50, this.whoami, false, true, -numTroops) // las quito del mapa
          setNumTropas(prevNumTropas => prevNumTropas - numTroops)
          this.numTropas -= numTroops // tampoco las tengo colocables, las tengo seleccionadas así que las quito de ahí
        } else {
          // una vez seleccionadas las tropas me tocará elegir un territorio enemigo
          const enemyTerritoryId = await this.seleccionarTerritorioAmigo(e, svgDoc, this.whoami)
          console.log(`Player has selected friendly territory ${enemyTerritoryId}`)
          this.ataqueDestino = enemyTerritoryId
          // TODO AVISAR AL BACK END, ESPERAR RESPUESTA Y ACTUALIZAR EL ESTADO DE LA PARTIDA
          //this.partida._id, this.whoami, targetId, this.tropasPuestas
          //atacarTerritorio(this.partida._id, this.whoami, this.ataqueOrigen, this.ataqueDestino, this.ataqueTropas)
          // esto recibe el back end
          console.log(this.partida._id, this.whoami, this.ataqueOrigen, this.ataqueDestino, this.ataqueTropas)
          // dependiendo del resultado de la llamada al back, se actualizará el estado de la partida y permitirá continuar
          await new Promise(resolve => setTimeout(resolve, 5000)) // falseo llamada al back
          const territorios = this.mapa.flatMap(continent => continent.territorios)
          const destinoTropas = await territorios.find(territorio => territorio.nombre === this.ataqueDestino)
          if (destinoTropas)
            destinoTropas.tropas += this.ataqueTropas // seguramente esto te lo dé el back? tampoco está mal hacerlo localmente
          this.colocarTropas(e, svgDoc, 50, 50, this.whoami, false, true, this.ataqueTropas) // las pongo
          console.log(destinoTropas)
          // TODO ACTUALIZAR ESTADO ETC -> de momento no lo hago, es trivial
          this.ataqueDestino = ''
          this.ataqueOrigen = ''
          this.ataqueTropas = 0
        }
        break
      case 3: // robo 
        //this.final(e, svgDoc, imgWidth, imgHeight);
        break
      case 4: // fin
        //this.final(e, svgDoc, imgWidth, imgHeight);
        break*/
    }
    //this.colocarTropas(e, svgDoc, imgWidth, imgHeight, this.whoami);
    //this.cdr.detectChanges()
  }

  // Cada vez que el jugador pulse en un territorio, se ejecutará este useEffect
  // solo ocurrira si está en la fase de ataque, ya que se avisa de newClicked, 
  // y si ya ha selccionado tropas. En caso contrario, se ejecutará el useEffect
  // de abajo, que es el que selecciona las tropas a poner. 
  useEffect(() => {
    if (ataqueTropas !== 0 && newClicked) {
        console.log("pulsación secundaria")
        console.log("Ataque tropas: ", ataqueTropas);
        let tropasAUtilizar = ataqueTropas;
        setAtaqueTropas(0);
        setNewClicked(false);
        // TODO ADAPTAR ESTO
        /*console.log('Tropas para atacar: ', ataqueTropas);
        const enemyTerritoryId = await seleccionarTerritorioEnemigo(e, territoriname, whoami);
          console.log(`Player has selected enemy territory ${enemyTerritoryId}`);
          setAtaqueDestino(enemyTerritoryId);
          console.log("Info:", partida._id, ataqueOrigen, ataqueDestino, tropasPuestas);
          let usuarioObjetivo = jugadores.find(jugador => jugador.territorios.includes(enemyTerritoryId));
          ResolverAtaque(partida._id, ataqueOrigen, ataqueDestino, -tropasPuestas).then(  
            async response => {
              console.log(response);
              Toast.success('¡Ataque realizado con éxito!');
              await new Promise(resolve => setTimeout(resolve, 1000));
              Toast.info('Tus dados: ' + response.dadosAtacante + ' Dados defensor: ' + response.dadosDefensor);
              await new Promise(resolve => setTimeout(resolve, 1000));
              Toast.info('Tus bajas: ' + response.resultadoBatalla.tropasPerdidasAtacante + ' Bajas defensor: ' + response.resultadoBatalla.tropasPerdidasDefensor);
              await new Promise(resolve => setTimeout(resolve, 1000));
              if(response.conquistado){
                Toast.success('¡Territorio conquistado!');

              } else {
                Alert.alert('¡No has conquistado el territorio!');
                
              }
              inicializacionPartida(partida); // actualizo el estado de la partida
              await new Promise(resolve => setTimeout(resolve, 1000)); // espero un rato
              
              //limpiarTropas();  en movil no cambiamos skins
              
              //Pinto el mapa
              //distribuirPiezas(); en movil no cambiamos skins
              setAtaqueDestino('');
              setAtaqueOrigen('');
              setAtaqueTropas(0);
              // update the state of every client
              socket.emit('actualizarEstado', partida._id);
              // and notify the defense player 
              
              socket.emit('ataco', {userOrigen: whoami, userDestino: usuarioObjetivo?.usuario ?? '', 
                               dadosAtacante: response.dadosAtacante, dadosDefensor: response.dadosDefensor, 
                               tropasPerdidasAtacante: response.resultadoBatalla.tropasPerdidasAtacante,
                               tropasPerdidasDefensor: response.resultadoBatalla.tropasPerdidasDefensor, 
                               conquistado: response.conquistado, territorioOrigen: ataqueOrigen, 
                               territorioDestino: enemyTerritoryId});
              setAtaquePerpetrado({userOrigen: whoami, userDestino: usuarioObjetivo?.usuario ?? '', 
                                      dadosAtacante: response.dadosAtacante, dadosDefensor: response.dadosDefensor, 
                                      tropasPerdidasAtacante: response.resultadoBatalla.tropasPerdidasAtacante,
                                      tropasPerdidasDefensor: response.resultadoBatalla.tropasPerdidasDefensor, 
                                      conquistado: response.conquistado, territorioOrigen: ataqueOrigen, 
                                      territorioDestino: enemyTerritoryId});
            },
            error => {
              Alert.alert('¡ERROR FATAL!');
              setFase(0);
              setFase(1);
              setAtaqueDestino('');
              setAtaqueOrigen('');
              setAtaqueTropas(0);
            }
          );*/
    }
  
  }, [ataqueTropas, newClicked]);
  
  // Cada vez que se haga un click en la fase de ataque, se ejecutará este useEffect
  // esto es debido a que se hace un setNewClicked. Dentro de aquí, ejecutamos 
  // la función q calcula las tropas a poner, por lo q el siguiente click de la fase
  // llamará al useEffect de arriba, y no a este. 
  useEffect(() => {
    if (ataqueTropas === 0 && newClicked) {
          console.log("pulsación inicial")
          console.log('Selecccionar tropas para atacar');
          setAtaqueTropas(0);
          setAtaqueDestino('');
          setAtaqueOrigen(''); 
          setNewClicked(false);
      
          const fetchTroops = async () => {
            console.log("entro dentro")
            const numTroops = await seleccionarTropas(territorioName, whoami, false);
            console.log(ataqueTropas, ataqueOrigen, ataqueDestino, numTroops);
            console.log(`Player has selected ${numTroops} troops`);
            console.log(recolocacion);
            tropasPuestas = 0;
            
            // llamo a colocarTropas con -numTroops para quitarlas del mapa
            colocarTropas(territorioName, whoami, false, -numTroops);
            setNumTropas(numTropas-numTroops); // tampoco las tengo colocables, las tengo seleccionadas así que las quito de ahí
            console.log('tropas colocables: ', numTropas);
            console.log('tropas seleccionadas', numTroops);
            setAtaqueTropas(numTroops);
            console.log('tropas para atacar: ', ataqueTropas);
          };

          fetchTroops();
          
          // llegados a este punto, ataqueTropas valdrá 0 porque React Native 
          // no actualiza el estado de forma síncrona. Para lograr lo del 
          // "if/else", lo que debo hacer es un useEffect que haga lo que haría el else...
          // voy a ver si lo consigo

    }
  }, [newClicked, ataqueTropas]);

  //Pone todas las tropas en 0
  const limpiarTropas =  () => {
    let mapa = thisPartida.mapa;
    mapa.forEach(continente => {
      continente.territorios.forEach(territorio => {
        territorio.tropas = 0;
      });
    });

  }

  //Esto pinta el mapa con las piezas de cada territorio pero creo que no hace falta aqui porque ya se pinta en el colocar tropas
  //No hace falta pintar nadc al hacer setThisPartida se pinta el mapa
  //Lo dejo de momento porque no se si hara falta para otra cosa, pero creo que no
  const distribuirPiezas = () => {
    //console.log("Continentes", mapa)
    //console.log("Jugadores", jugadores)
    //let mapa = thisPartida.mapa;
    //setMapa(mapa);
    //console.log(mapa[0].territorios);
    /*for(let continente of mapa){
      for(let territorio of continente.territorios){
        //console.log(territorio)
        // Find the player who owns this territory
        let jugador = partida.jugadores.find(jugador => jugador.territorios.includes(territorio.nombre));
        //console.log(jugador)
  
        // If a player was found, get their color
        let color = jugador ? jugador.color : undefined;
        //console.log(color)
        if(color !== undefined && jugador) {
          //console.log(`The color of territory ${territorio.nombre} is ${color}, and it has ${territorio.tropas} troops.`);
          //colocarTropas(territorio.nombre, jugador.usuario, true, territorio.tropas);
        }
      }
    }*/
    setterritoriosTropas(territoriosTropasAux);
    console.log(partida);
    setThisPartida(partida);
  }

  const inicializarPartida =  (partida) => {
    // Inicializa los atributos de la partida
    //console.log(partida);
    //jugadores = partida.jugadores;
    //console.log(partida);
    //let me = partida.jugadores.find(jugador => jugador.usuario === whoami);
    //setThisPartida(partida);
    turno  = partida.turno;
    nombrePartida = partida.nombre;
    numJugadores = partida.jugadores.length;
    setMapa(partida.mapa);

    descartes = partida.descartes;

    ganador = partida.ganador;
    setFase(partida.fase);
    setTurnoJugador(partida.jugadores[turno % numJugadores].usuario)

    //TODO fetch cartas del back
    setCartas(partida.cartas);

    //limpiarTropas();
    //distribuirPiezas();
    //setTurnoJugador(jugadores[turno % numJugadores].usuario);
    //turnoJugador = partida.jugadores[partida.turno % this.numJugadores];
    //console.log(partida.jugadores[turno % numJugadores].usuario);
    if(partida.jugadores[turno % numJugadores].usuario === whoami){
      //STUB
      //partida.auxColocar = 3;
      setNumTropas(partida.auxColocar);
      
    }
    console.log("MAPA:", thisPartida);
  }


  const onLoad = async () => {
    // Aunque venga del lobby, es necesario actualizar el estado con la información de la partida (como los colores de los jugadores)
    // (Al parecer getPartida es un put)

    const response = await axios.put(`${IP}/partida/getPartida/`, { idPartida: partida._id }, { headers: { 'Authorization': token } })
    if (response.status === 200) {
      setThisPartida(response.data.partida)
    } else {
      Alert.alert('Error', 'Error cargando partida');
    }
    setWhoami(await AsyncStorage.getItem('username'));
    console.log(response.data.partida);
    inicializarPartida(response.data.partida);
    //console.log(partida.jugadores);
  }

    const [stateTropas, setStateTropas] = useState({territoriname: '', user: '', init: false});

  const colocarTropas = (territoriname2, user2, init2, limite= null) => {
    // Ask the user for the number of troops

    let troops;
    let duenno = thisPartida.jugadores.find(jugador => jugador.usuario == user2);

    if(!init2 && !recolocacion){
      if(!(territoriname2 && duenno && duenno.territorios.includes(territoriname2))){
        alert('No puedes poner tropas en territorios que no te pertenecen ('+territoriname2+')');
        //this.cdr.detectChanges();
        return;
      }
    }
    
    //Si hay limite, no hace falta preguntar por las tropas, esto solo se usa cuando hay que quitar tropas del mapa
    if(limite){
      troops = limite.toString();

      let numTroops = parseInt(troops);
      let select = false;
      if (!init2 && !recolocacion && !select && (numTroops > numTropas)) {
        Alert.alert('¡No tienes suficientes tropas!');
        eventoCancelado = true;
        return;
      }

      tropasPuestas += numTroops;
      //console.log(territoriosTropas.length);
      let thisPartidaAux = thisPartida;
      const territorios = thisPartidaAux.mapa.flatMap(continent => continent.territorios);
      if (territorios) {
        const terrainInfo = territorios.find(territorio => territorio.nombre === territoriname2)
        if (terrainInfo) {
          let aux = terrainInfo.tropas;
          terrainInfo.tropas += numTroops;
          terrainInfo.user = user2;
          numTroops = terrainInfo.tropas;
          //setterritoriosTropas(territoriosTropas);
          setThisPartida(thisPartidaAux);
          if(!init2){
            let newtropas = numTropas - numTroops;
            setNumTropas(newtropas);
          }
        }
        else {
          //console.log("territorio: " + territoriname2, numTroops, user2);
          //territoriosTropas.push({terrainId: territoriname2, numTropas: numTroops, user: user2});
          //setterritoriosTropas([...territoriosTropas, {terrainId: territoriname2, numTropas: numTroops, user: user2}]);
          territoriosTropasAux.push({terrainId: territoriname2, numTropas: numTroops, user: user2});
        }
      }
    }
    else if(recolocacion){ 
      troops = '0';
    }
    else{
      //Preguntar por tropas
      setStateTropas({territoriname: territoriname2, user: user2, init: init2});
      let newState = { message: null };
      setState(newState);
      let auxDialog = {visible: true, type: 'colocar', title: 'Cuantas tropas quieres colocar?'};
      setDialogState(auxDialog);
    }

  }

 //Aqui sigue la funcion colocar tropas despus de introducirlas en el dialog
  const colocarTropasCorrectas = async () => {
    
    console.log('me meto en colocarTropasCorrectas: ', stateTropas.territoriname);
    if (state.message === null) {
      return;
    }

    let numTroops = parseInt(state.message);
    let select = false;
    if (!stateTropas.init && !recolocacion && !select && (numTroops > numTropas)) {
      Alert.alert('¡No tienes suficientes tropas!');
      eventoCancelado = true;
      return;
    }

    
    let newtropas = numTropas - numTroops;
    setNumTropas(newtropas);

    tropasPuestas += numTroops;
   
    let thisPartidaAux = thisPartida;
    const territorios = thisPartidaAux.mapa.flatMap(continent => continent.territorios);

      if (territorios) {
        const terrainInfo = territorios.find(territorio => territorio.nombre === stateTropas.territoriname)
        if (terrainInfo) {
          terrainInfo.tropas += numTroops;
          terrainInfo.user = stateTropas.user;
          numTroops = terrainInfo.numTropas;
          //setterritoriosTropas(territoriosTropas);
          setThisPartida(thisPartidaAux);
        }
        else {
          //console.log("territorio: " + territoriname2, numTroops, user2);
          //territoriosTropas.push({terrainId: territoriname2, numTropas: numTroops, user: user2});
          //setterritoriosTropas([...territoriosTropas, {terrainId: territoriname2, numTropas: numTroops, user: user2}]);
          territoriosTropasAux.push({terrainId: stateTropas.territoriname, numTropas: numTroops, user: stateTropas.user});
        }
      }

    //si estoy en fase de colocacion socket emit y coloco tropas e back
    if(fase === 0){
      ocupado = true;
      //console.log('Colocando tropas en el territorio: ', stateTropas.territoriname, ' con ', numTroops, ' tropas.');
      const response = await axios.put(`${IP}/partida/colocarTropas`, {idPartida: thisPartida._id, territorio: stateTropas.territoriname, numTropas: tropasPuestas}, { headers: { 'Authorization': token } })
        if (response.status === 200) {
          console.log(response);
          tropasPuestas = 0;
          ocupado = false;
          // notify to back with a socket, the back will notify every client in the game
          socket.emit('actualizarEstado', partida._id);
        } else {
          Alert.alert('¡ERROR FATAL!');
          colocarTropas(stateTropas.territoriname,stateTropas.user, stateTropas.init, tropasPuestas);
          ocupado = false
          numTropas += tropasPuestas;
          tropasPuestas = 0;
        }
      
      setTimeout(() => { // si no recibo respuesta del back, está caído
        //console.log("entro")
        if(ocupado){ 
          console.log("fatal error")
          Alert.alert('¡ERROR FATAL!');
          ocupado = false;
          numTropas += tropasPuestas;
        }
      }, 2000);
    }

  }


  //Todo esto es para esperar a que se introduzcan las tropas en el dialog
  useEffect(() => {
    if (seguir) {
      colocarSeguir();
    }
  }, [seguir, numTroops]);

  const colocarSeguir = async () => {
    console.log('seguir');
    await AsyncStorage.setItem('numTroops', numTroops.toString());
    await AsyncStorage.setItem('seguir', 'true');
  }

  const waitForTropasSeleccionadas = async () => {
    let sigo = await AsyncStorage.getItem('seguir');
    if (sigo === 'true') {
      setSeguir(false);
      await AsyncStorage.removeItem('seguir');
      return;
    }
    else{
      await new Promise(
        resolve => setTimeout(resolve, 500)
      );
    }
    await waitForTropasSeleccionadas();
  }


  const [numTroops, setNumTroops] = useState(0);
  //Funcion para seleccionar tropas que se usa en el statemachine
  const seleccionarTropas = async (_territoriId, user2, attack2) => {
    console.log('Seleccionar tropas');
    
      
      const terrainId = _territoriId;
      //para probar comento esto
      let duenno = thisPartida.jugadores.find(jugador => jugador.usuario == user2);
      if (!(terrainId && duenno && duenno.territorios.includes(terrainId))) {
        Alert.alert('No puedes seleccionar tropas en territorios que no te pertenecen');
        //this.cdr.detectChanges();

        return;
      }
      //Preguntar por tropas
      setStateTropas({territoriId: _territoriId, user: user2, attack: attack2});
      let newState = { message: null };
      setState(newState);
      setDialogState({visible: true, type: 'seleccionar', title: 'Cuantas tropas quieres seleccionar?'});
      //setDialog('seleccionar');
      //setVisible(true);
      //Despues del dialog se sigue en el SelectTropasCorrectas
      await waitForTropasSeleccionadas();

      return parseInt(await AsyncStorage.getItem('numTroops'));
      
  }

  //Aqui sigue la funcion seleccionar tropas despus de introducirlas en el dialog
  const seleccionarTropasCorrectas = async () => {
    const troops = state.message;

    let numTroops = parseInt(troops);

    // Check if the input is a valid number
    if (isNaN(numTroops) || numTroops < 1) {
      Alert.alert('Por favor, introduce un número válido de tropas.');

      return;
    }

    if (stateTropas.attack && numTroops > 3) {
      console.log(stateTropas.attack)
      Alert.alert('Sólo puedes seleccionar hasta 3 tropas para atacar.')
      this.cdr.detectChanges();

      return;
    }

    let thisPartidaAux = thisPartida;
    const territorios = thisPartidaAux.mapa.flatMap(continent => continent.territorios);
    //console.log(territorios);
    const terrainInfo = territorios.find(terrain => terrain.nombre === stateTropas.territoriId);
    if (terrainInfo) {
      if (terrainInfo.tropas < numTroops + 1) { // se debe dejar al menos una tropa y no quedarnos con tropas negativasd
        Alert.alert('No tienes suficientes tropas en este territorio. Recuerda que debes dejar al menos una tropa.');

        return;
      }
      setAtaqueTropas(ataqueTropas + numTroops)
    } else {
      Alert.alert('Ha ocurrido un error interno.', 'Atención');

      return;
    }

    Alert.alert(`Has seleccionado ${numTroops} tropas.`);
    setAtaqueOrigen(stateTropas.territoriId);
    setNumTroops(numTroops);
    setSeguir(true);
  }



  //rutina de OK del boton de dialog
  const handleOK = async () => {
    //setnumterritoriosTropas(state.message);
    setDialogBool(true);
    setDialogState({type: dialogState.type, visible: false, title: dialogState.title})
    console.log('me meto en handleOK: ', state.message);
    
  }


  //TODO: Implementar la rutina de cancelar
  const handleCancel = async () => {
    setDialogState({type: null, visible: false, title: dialogState.title})
  }
  return (
    <View style={styles.container} >
      <View style={styles.containerleft}>
        <ReactNativeZoomableView
          maxZoom={3}
          minZoom={0.8}
          zoomStep={0.5}
          initialZoom={1}
          bindToBorders={false}
  >
          <MapSVGComponent />
        </ReactNativeZoomableView>
      </View>
      <View style={styles.containerRight}>
        <Text1 style={styles.zoneText}>Tropas: {numTropas}</Text1>
        <Text1 style={styles.zoneText}>Turno del jugador: {turnoJugador}</Text1>
        <View style={styles.buttonContainer}>
          <TouchableOpacity style={styles.botonControl} onPress={updateFase}>
            <Text1 style={styles.zoneText}>Siguiente Fase</Text1>
          </TouchableOpacity>
          <TouchableOpacity style={styles.botonControl}>
            <Text1 style={styles.zoneText}>Cambiar turno</Text1>
          </TouchableOpacity>

          <Text1 style={styles.zoneText}>{textoFase}</Text1>
        </View>
      </View>

      {/*DIALOGO PARA LAS TROPAS */}
        <Dialog.Container visible={dialogState.visible} > 
        <Dialog.Title>{dialogState.title}</Dialog.Title>
           <Dialog.Input inputMode='numeric' label="Troop" onChangeText={(troop ) => setState({ message: troop })} 
            ></Dialog.Input>
          <Dialog.Button label="Cancel" onPress={handleCancel} />
          <Dialog.Button label="OK" onPress={handleOK} />
        </Dialog.Container>
    </View>
    
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    alignItems: 'start',
    flexDirection: 'row',
    justifyContent: 'left',
  },
  containerRight: {
    top: 25,
    left: 15,
    flex: 1,
    alignItems: 'start',
    flexDirection: 'column',
    justifyContent: 'start',
  },
  containerleft: {
    height: 400,
    width: 600,

  },
  mapImage: {
    width: 300,
    height: 300,
  },
  zoneText: {
    color: 'black',
    fontWeight: 'bold',
  },
  buttonContainer: {
    flexDirection: 'column',
    justifyContent: 'space-around',
    width: 200
  },
  botonControl: {
    backgroundColor: '#007bff',
    color: 'white',
    padding: 10,
    textAlign: 'center',
    margin: 10,
    borderRadius: 5,
  },
});
